var HexoMusicPlayer=function(){"use strict";var fs=Object.defineProperty;var ds=(K,je,De)=>je in K?fs(K,je,{enumerable:!0,configurable:!0,writable:!0,value:De}):K[je]=De;var Ve=(K,je,De)=>ds(K,typeof je!="symbol"?je+"":je,De);var Rr,Nr,Br,$r,Vr;function K(){}const je=e=>e;function De(e,t){for(const n in t)e[n]=t[n];return e}function Dn(e){return e()}function On(){return Object.create(null)}function Oe(e){e.forEach(Dn)}function un(e){return typeof e=="function"}function Hn(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Dt;function Ot(e,t){return e===t?!0:(Dt||(Dt=document.createElement("a")),Dt.href=t,e===Dt.href)}function ii(e){return Object.keys(e).length===0}function Fn(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}const qn=typeof window<"u";let oi=qn?()=>window.performance.now():()=>Date.now(),fn=qn?e=>requestAnimationFrame(e):K;const ut=new Set;function zn(e){ut.forEach(t=>{t.c(e)||(ut.delete(t),t.f())}),ut.size!==0&&fn(zn)}function si(e){let t;return ut.size===0&&fn(zn),{promise:new Promise(n=>{ut.add(t={c:e,f:n})}),abort(){ut.delete(t)}}}function p(e,t){e.appendChild(t)}function Wn(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function li(e){const t=b("style");return t.textContent="/* empty */",ai(Wn(e),t),t.sheet}function ai(e,t){return p(e.head||e,t),t.sheet}function N(e,t,n){e.insertBefore(t,n||null)}function q(e){e.parentNode&&e.parentNode.removeChild(e)}function ci(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function b(e){return document.createElement(e)}function ui(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ie(e){return document.createTextNode(e)}function A(){return ie(" ")}function dn(){return ie("")}function Z(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function d(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const fi=["width","height"];function Rn(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t)t[r]==null?e.removeAttribute(r):r==="style"?e.style.cssText=t[r]:r==="__value"?e.value=e[r]=t[r]:n[r]&&n[r].set&&fi.indexOf(r)===-1?e[r]=t[r]:d(e,r,t[r])}function Nn(e,t){for(const n in t)d(e,n,t[n])}function Bn(e){return e===""?null:+e}function di(e){return Array.from(e.childNodes)}function ye(e,t){t=""+t,e.data!==t&&(e.data=t)}function $n(e,t){e.value=t??""}function He(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,"")}function z(e,t,n){e.classList.toggle(t,!!n)}function Vn(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}const Ht=new Map;let Ft=0;function pi(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function gi(e,t){const n={stylesheet:li(t),rules:{}};return Ht.set(e,n),n}function Un(e,t,n,r,o,s,i,a=0){const c=16.666/r;let l=`{
`;for(let x=0;x<=1;x+=c){const w=t+(n-t)*s(x);l+=x*100+`%{${i(w,1-w)}}
`}const f=l+`100% {${i(n,1-n)}}
}`,g=`__svelte_${pi(f)}_${a}`,y=Wn(e),{stylesheet:_,rules:v}=Ht.get(y)||gi(y,e);v[g]||(v[g]=!0,_.insertRule(`@keyframes ${g} ${f}`,_.cssRules.length));const L=e.style.animation||"";return e.style.animation=`${L?`${L}, `:""}${g} ${r}ms linear ${o}ms 1 both`,Ft+=1,g}function mi(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),o=n.length-r.length;o&&(e.style.animation=r.join(", "),Ft-=o,Ft||hi())}function hi(){fn(()=>{Ft||(Ht.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&q(t)}),Ht.clear())})}let vt;function xt(e){vt=e}function pn(){if(!vt)throw new Error("Function called outside component initialization");return vt}function Gn(e){pn().$$.on_mount.push(e)}function Xn(e){pn().$$.on_destroy.push(e)}function bi(){const e=pn();return(t,n,{cancelable:r=!1}={})=>{const o=e.$$.callbacks[t];if(o){const s=Vn(t,n,{cancelable:r});return o.slice().forEach(i=>{i.call(e,s)}),!s.defaultPrevented}return!0}}const ft=[],qt=[];let dt=[];const Zn=[],yi=Promise.resolve();let gn=!1;function wi(){gn||(gn=!0,yi.then(Yn))}function pt(e){dt.push(e)}const mn=new Set;let gt=0;function Yn(){if(gt!==0)return;const e=vt;do{try{for(;gt<ft.length;){const t=ft[gt];gt++,xt(t),_i(t.$$)}}catch(t){throw ft.length=0,gt=0,t}for(xt(null),ft.length=0,gt=0;qt.length;)qt.pop()();for(let t=0;t<dt.length;t+=1){const n=dt[t];mn.has(n)||(mn.add(n),n())}dt.length=0}while(ft.length);for(;Zn.length;)Zn.pop()();gn=!1,mn.clear(),xt(e)}function _i(e){if(e.fragment!==null){e.update(),Oe(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(pt)}}function vi(e){const t=[],n=[];dt.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),dt=t}let kt;function xi(){return kt||(kt=Promise.resolve(),kt.then(()=>{kt=null})),kt}function hn(e,t,n){e.dispatchEvent(Vn(`${t?"intro":"outro"}${n}`))}const zt=new Set;let Fe;function we(){Fe={r:0,c:[],p:Fe}}function _e(){Fe.r||Oe(Fe.c),Fe=Fe.p}function k(e,t){e&&e.i&&(zt.delete(e),e.i(t))}function E(e,t,n,r){if(e&&e.o){if(zt.has(e))return;zt.add(e),Fe.c.push(()=>{zt.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}const ki={duration:0};function Wt(e,t,n,r){let s=t(e,n,{direction:"both"}),i=r?0:1,a=null,c=null,l=null,f;function g(){l&&mi(e,l)}function y(v,L){const x=v.b-i;return L*=Math.abs(x),{a:i,b:v.b,d:x,duration:L,start:v.start,end:v.start+L,group:v.group}}function _(v){const{delay:L=0,duration:x=300,easing:w=je,tick:m=K,css:I}=s||ki,C={start:oi()+L,b:v};v||(C.group=Fe,Fe.r+=1),"inert"in e&&(v?f!==void 0&&(e.inert=f):(f=e.inert,e.inert=!0)),a||c?c=C:(I&&(g(),l=Un(e,i,v,x,L,w,I)),v&&m(0,1),a=y(C,x),pt(()=>hn(e,v,"start")),si(G=>{if(c&&G>c.start&&(a=y(c,x),c=null,hn(e,a.b,"start"),I&&(g(),l=Un(e,i,a.b,a.duration,0,w,s.css))),a){if(G>=a.end)m(i=a.b,1-i),hn(e,a.b,"end"),c||(a.b?g():--a.group.r||Oe(a.group.c)),a=null;else if(G>=a.start){const S=G-a.start;i=a.a+a.d*w(S/a.duration),m(i,1-i)}}return!!(a||c)}))}return{run(v){un(s)?xi().then(()=>{s=s({direction:v?"in":"out"}),_(v)}):_(v)},end(){g(),a=c=null}}}function Qn(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Kn(e,t){const n={},r={},o={$$scope:1};let s=e.length;for(;s--;){const i=e[s],a=t[s];if(a){for(const c in i)c in a||(r[c]=1);for(const c in a)o[c]||(n[c]=a[c],o[c]=1);e[s]=a}else for(const c in i)o[c]=1}for(const i in r)i in n||(n[i]=void 0);return n}function B(e){e&&e.c()}function W(e,t,n){const{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),pt(()=>{const s=e.$$.on_mount.map(Dn).filter(un);e.$$.on_destroy?e.$$.on_destroy.push(...s):Oe(s),e.$$.on_mount=[]}),o.forEach(pt)}function R(e,t){const n=e.$$;n.fragment!==null&&(vi(n.after_update),Oe(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Si(e,t){e.$$.dirty[0]===-1&&(ft.push(e),wi(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Jn(e,t,n,r,o,s,i=null,a=[-1]){const c=vt;xt(e);const l=e.$$={fragment:null,ctx:[],props:s,update:K,not_equal:o,bound:On(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:On(),dirty:a,skip_bound:!1,root:t.target||c.$$.root};i&&i(l.root);let f=!1;if(l.ctx=n?n(e,t.props||{},(g,y,..._)=>{const v=_.length?_[0]:y;return l.ctx&&o(l.ctx[g],l.ctx[g]=v)&&(!l.skip_bound&&l.bound[g]&&l.bound[g](v),f&&Si(e,g)),y}):[],l.update(),f=!0,Oe(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const g=di(t.target);l.fragment&&l.fragment.l(g),g.forEach(q)}else l.fragment&&l.fragment.c();t.intro&&k(e.$$.fragment),W(e,t.target,t.anchor),Yn()}xt(c)}class er{constructor(){Ve(this,"$$");Ve(this,"$$set")}$destroy(){R(this,1),this.$destroy=K}$on(t,n){if(!un(n))return K;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!ii(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Pi="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Pi);const St=/^[a-z0-9]+(-[a-z0-9]+)*$/,Rt=(e,t,n,r="")=>{const o=e.split(":");if(e.slice(0,1)==="@"){if(o.length<2||o.length>3)return null;r=o.shift().slice(1)}if(o.length>3||!o.length)return null;if(o.length>1){const a=o.pop(),c=o.pop(),l={provider:o.length>0?o[0]:r,prefix:c,name:a};return t&&!Nt(l)?null:l}const s=o[0],i=s.split("-");if(i.length>1){const a={provider:r,prefix:i.shift(),name:i.join("-")};return t&&!Nt(a)?null:a}if(n&&r===""){const a={provider:r,prefix:"",name:s};return t&&!Nt(a,n)?null:a}return null},Nt=(e,t)=>e?!!((e.provider===""||e.provider.match(St))&&(t&&e.prefix===""||e.prefix.match(St))&&e.name.match(St)):!1,tr=Object.freeze({left:0,top:0,width:16,height:16}),Bt=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),$t=Object.freeze({...tr,...Bt}),bn=Object.freeze({...$t,body:"",hidden:!1});function Ii(e,t){const n={};!e.hFlip!=!t.hFlip&&(n.hFlip=!0),!e.vFlip!=!t.vFlip&&(n.vFlip=!0);const r=((e.rotate||0)+(t.rotate||0))%4;return r&&(n.rotate=r),n}function nr(e,t){const n=Ii(e,t);for(const r in bn)r in Bt?r in e&&!(r in n)&&(n[r]=Bt[r]):r in t?n[r]=t[r]:r in e&&(n[r]=e[r]);return n}function Ei(e,t){const n=e.icons,r=e.aliases||Object.create(null),o=Object.create(null);function s(i){if(n[i])return o[i]=[];if(!(i in o)){o[i]=null;const a=r[i]&&r[i].parent,c=a&&s(a);c&&(o[i]=[a].concat(c))}return o[i]}return Object.keys(n).concat(Object.keys(r)).forEach(s),o}function Mi(e,t,n){const r=e.icons,o=e.aliases||Object.create(null);let s={};function i(a){s=nr(r[a]||o[a],s)}return i(t),n.forEach(i),nr(e,s)}function rr(e,t){const n=[];if(typeof e!="object"||typeof e.icons!="object")return n;e.not_found instanceof Array&&e.not_found.forEach(o=>{t(o,null),n.push(o)});const r=Ei(e);for(const o in r){const s=r[o];s&&(t(o,Mi(e,o,s)),n.push(o))}return n}const Li={provider:"",aliases:{},not_found:{},...tr};function yn(e,t){for(const n in t)if(n in e&&typeof e[n]!=typeof t[n])return!1;return!0}function ir(e){if(typeof e!="object"||e===null)return null;const t=e;if(typeof t.prefix!="string"||!e.icons||typeof e.icons!="object"||!yn(e,Li))return null;const n=t.icons;for(const o in n){const s=n[o];if(!o.match(St)||typeof s.body!="string"||!yn(s,bn))return null}const r=t.aliases||Object.create(null);for(const o in r){const s=r[o],i=s.parent;if(!o.match(St)||typeof i!="string"||!n[i]&&!r[i]||!yn(s,bn))return null}return t}const or=Object.create(null);function Ai(e,t){return{provider:e,prefix:t,icons:Object.create(null),missing:new Set}}function rt(e,t){const n=or[e]||(or[e]=Object.create(null));return n[t]||(n[t]=Ai(e,t))}function wn(e,t){return ir(t)?rr(t,(n,r)=>{r?e.icons[n]=r:e.missing.add(n)}):[]}function Ci(e,t,n){try{if(typeof n.body=="string")return e.icons[t]={...n},!0}catch{}return!1}let Pt=!1;function sr(e){return typeof e=="boolean"&&(Pt=e),Pt}function Ti(e){const t=typeof e=="string"?Rt(e,!0,Pt):e;if(t){const n=rt(t.provider,t.prefix),r=t.name;return n.icons[r]||(n.missing.has(r)?null:void 0)}}function ji(e,t){const n=Rt(e,!0,Pt);if(!n)return!1;const r=rt(n.provider,n.prefix);return Ci(r,n.name,t)}function Di(e,t){if(typeof e!="object")return!1;if(typeof t!="string"&&(t=e.provider||""),Pt&&!t&&!e.prefix){let o=!1;return ir(e)&&(e.prefix="",rr(e,(s,i)=>{i&&ji(s,i)&&(o=!0)})),o}const n=e.prefix;if(!Nt({provider:t,prefix:n,name:"a"}))return!1;const r=rt(t,n);return!!wn(r,e)}const lr=Object.freeze({width:null,height:null}),ar=Object.freeze({...lr,...Bt}),Oi=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Hi=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function cr(e,t,n){if(t===1)return e;if(n=n||100,typeof e=="number")return Math.ceil(e*t*n)/n;if(typeof e!="string")return e;const r=e.split(Oi);if(r===null||!r.length)return e;const o=[];let s=r.shift(),i=Hi.test(s);for(;;){if(i){const a=parseFloat(s);isNaN(a)?o.push(s):o.push(Math.ceil(a*t*n)/n)}else o.push(s);if(s=r.shift(),s===void 0)return o.join("");i=!i}}function Fi(e,t="defs"){let n="";const r=e.indexOf("<"+t);for(;r>=0;){const o=e.indexOf(">",r),s=e.indexOf("</"+t);if(o===-1||s===-1)break;const i=e.indexOf(">",s);if(i===-1)break;n+=e.slice(o+1,s).trim(),e=e.slice(0,r).trim()+e.slice(i+1)}return{defs:n,content:e}}function qi(e,t){return e?"<defs>"+e+"</defs>"+t:t}function zi(e,t,n){const r=Fi(e);return qi(r.defs,t+r.content+n)}const Wi=e=>e==="unset"||e==="undefined"||e==="none";function Ri(e,t){const n={...$t,...e},r={...ar,...t},o={left:n.left,top:n.top,width:n.width,height:n.height};let s=n.body;[n,r].forEach(L=>{const x=[],w=L.hFlip,m=L.vFlip;let I=L.rotate;w?m?I+=2:(x.push("translate("+(o.width+o.left).toString()+" "+(0-o.top).toString()+")"),x.push("scale(-1 1)"),o.top=o.left=0):m&&(x.push("translate("+(0-o.left).toString()+" "+(o.height+o.top).toString()+")"),x.push("scale(1 -1)"),o.top=o.left=0);let C;switch(I<0&&(I-=Math.floor(I/4)*4),I=I%4,I){case 1:C=o.height/2+o.top,x.unshift("rotate(90 "+C.toString()+" "+C.toString()+")");break;case 2:x.unshift("rotate(180 "+(o.width/2+o.left).toString()+" "+(o.height/2+o.top).toString()+")");break;case 3:C=o.width/2+o.left,x.unshift("rotate(-90 "+C.toString()+" "+C.toString()+")");break}I%2===1&&(o.left!==o.top&&(C=o.left,o.left=o.top,o.top=C),o.width!==o.height&&(C=o.width,o.width=o.height,o.height=C)),x.length&&(s=zi(s,'<g transform="'+x.join(" ")+'">',"</g>"))});const i=r.width,a=r.height,c=o.width,l=o.height;let f,g;i===null?(g=a===null?"1em":a==="auto"?l:a,f=cr(g,c/l)):(f=i==="auto"?c:i,g=a===null?cr(f,l/c):a==="auto"?l:a);const y={},_=(L,x)=>{Wi(x)||(y[L]=x.toString())};_("width",f),_("height",g);const v=[o.left,o.top,c,l];return y.viewBox=v.join(" "),{attributes:y,viewBox:v,body:s}}const Ni=/\sid="(\S+)"/g,Bi="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let $i=0;function Vi(e,t=Bi){const n=[];let r;for(;r=Ni.exec(e);)n.push(r[1]);if(!n.length)return e;const o="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(s=>{const i=typeof t=="function"?t(s):t+($i++).toString(),a=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+i+o+"$3")}),e=e.replace(new RegExp(o,"g"),""),e}const _n=Object.create(null);function Ui(e,t){_n[e]=t}function vn(e){return _n[e]||_n[""]}function xn(e){let t;if(typeof e.resources=="string")t=[e.resources];else if(t=e.resources,!(t instanceof Array)||!t.length)return null;return{resources:t,path:e.path||"/",maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:e.random===!0,index:e.index||0,dataAfterTimeout:e.dataAfterTimeout!==!1}}const kn=Object.create(null),It=["https://api.simplesvg.com","https://api.unisvg.com"],Vt=[];for(;It.length>0;)It.length===1||Math.random()>.5?Vt.push(It.shift()):Vt.push(It.pop());kn[""]=xn({resources:["https://api.iconify.design"].concat(Vt)});function Gi(e,t){const n=xn(t);return n===null?!1:(kn[e]=n,!0)}function Sn(e){return kn[e]}let ur=(()=>{let e;try{if(e=fetch,typeof e=="function")return e}catch{}})();function Xi(e,t){const n=Sn(e);if(!n)return 0;let r;if(!n.maxURL)r=0;else{let o=0;n.resources.forEach(i=>{o=Math.max(o,i.length)});const s=t+".json?icons=";r=n.maxURL-o-n.path.length-s.length}return r}function Zi(e){return e===404}const Yi=(e,t,n)=>{const r=[],o=Xi(e,t),s="icons";let i={type:s,provider:e,prefix:t,icons:[]},a=0;return n.forEach((c,l)=>{a+=c.length+1,a>=o&&l>0&&(r.push(i),i={type:s,provider:e,prefix:t,icons:[]},a=c.length),i.icons.push(c)}),r.push(i),r};function Qi(e){if(typeof e=="string"){const t=Sn(e);if(t)return t.path}return"/"}const Ki={prepare:Yi,send:(e,t,n)=>{if(!ur){n("abort",424);return}let r=Qi(t.provider);switch(t.type){case"icons":{const s=t.prefix,a=t.icons.join(","),c=new URLSearchParams({icons:a});r+=s+".json?"+c.toString();break}case"custom":{const s=t.uri;r+=s.slice(0,1)==="/"?s.slice(1):s;break}default:n("abort",400);return}let o=503;ur(e+r).then(s=>{const i=s.status;if(i!==200){setTimeout(()=>{n(Zi(i)?"abort":"next",i)});return}return o=501,s.json()}).then(s=>{if(typeof s!="object"||s===null){setTimeout(()=>{s===404?n("abort",s):n("next",o)});return}setTimeout(()=>{n("success",s)})}).catch(()=>{n("next",o)})}};function Ji(e){const t={loaded:[],missing:[],pending:[]},n=Object.create(null);e.sort((o,s)=>o.provider!==s.provider?o.provider.localeCompare(s.provider):o.prefix!==s.prefix?o.prefix.localeCompare(s.prefix):o.name.localeCompare(s.name));let r={provider:"",prefix:"",name:""};return e.forEach(o=>{if(r.name===o.name&&r.prefix===o.prefix&&r.provider===o.provider)return;r=o;const s=o.provider,i=o.prefix,a=o.name,c=n[s]||(n[s]=Object.create(null)),l=c[i]||(c[i]=rt(s,i));let f;a in l.icons?f=t.loaded:i===""||l.missing.has(a)?f=t.missing:f=t.pending;const g={provider:s,prefix:i,name:a};f.push(g)}),t}function fr(e,t){e.forEach(n=>{const r=n.loaderCallbacks;r&&(n.loaderCallbacks=r.filter(o=>o.id!==t))})}function eo(e){e.pendingCallbacksFlag||(e.pendingCallbacksFlag=!0,setTimeout(()=>{e.pendingCallbacksFlag=!1;const t=e.loaderCallbacks?e.loaderCallbacks.slice(0):[];if(!t.length)return;let n=!1;const r=e.provider,o=e.prefix;t.forEach(s=>{const i=s.icons,a=i.pending.length;i.pending=i.pending.filter(c=>{if(c.prefix!==o)return!0;const l=c.name;if(e.icons[l])i.loaded.push({provider:r,prefix:o,name:l});else if(e.missing.has(l))i.missing.push({provider:r,prefix:o,name:l});else return n=!0,!0;return!1}),i.pending.length!==a&&(n||fr([e],s.id),s.callback(i.loaded.slice(0),i.missing.slice(0),i.pending.slice(0),s.abort))})}))}let to=0;function no(e,t,n){const r=to++,o=fr.bind(null,n,r);if(!t.pending.length)return o;const s={id:r,icons:t,callback:e,abort:o};return n.forEach(i=>{(i.loaderCallbacks||(i.loaderCallbacks=[])).push(s)}),o}function ro(e,t=!0,n=!1){const r=[];return e.forEach(o=>{const s=typeof o=="string"?Rt(o,t,n):o;s&&r.push(s)}),r}var io={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function oo(e,t,n,r){const o=e.resources.length,s=e.random?Math.floor(Math.random()*o):e.index;let i;if(e.random){let S=e.resources.slice(0);for(i=[];S.length>1;){const H=Math.floor(Math.random()*S.length);i.push(S[H]),S=S.slice(0,H).concat(S.slice(H+1))}i=i.concat(S)}else i=e.resources.slice(s).concat(e.resources.slice(0,s));const a=Date.now();let c="pending",l=0,f,g=null,y=[],_=[];typeof r=="function"&&_.push(r);function v(){g&&(clearTimeout(g),g=null)}function L(){c==="pending"&&(c="aborted"),v(),y.forEach(S=>{S.status==="pending"&&(S.status="aborted")}),y=[]}function x(S,H){H&&(_=[]),typeof S=="function"&&_.push(S)}function w(){return{startTime:a,payload:t,status:c,queriesSent:l,queriesPending:y.length,subscribe:x,abort:L}}function m(){c="failed",_.forEach(S=>{S(void 0,f)})}function I(){y.forEach(S=>{S.status==="pending"&&(S.status="aborted")}),y=[]}function C(S,H,Y){const J=H!=="success";switch(y=y.filter(Q=>Q!==S),c){case"pending":break;case"failed":if(J||!e.dataAfterTimeout)return;break;default:return}if(H==="abort"){f=Y,m();return}if(J){f=Y,y.length||(i.length?G():m());return}if(v(),I(),!e.random){const Q=e.resources.indexOf(S.resource);Q!==-1&&Q!==e.index&&(e.index=Q)}c="completed",_.forEach(Q=>{Q(Y)})}function G(){if(c!=="pending")return;v();const S=i.shift();if(S===void 0){if(y.length){g=setTimeout(()=>{v(),c==="pending"&&(I(),m())},e.timeout);return}m();return}const H={status:"pending",resource:S,callback:(Y,J)=>{C(H,Y,J)}};y.push(H),l++,g=setTimeout(G,e.rotate),n(S,t,H.callback)}return setTimeout(G),w}function dr(e){const t={...io,...e};let n=[];function r(){n=n.filter(a=>a().status==="pending")}function o(a,c,l){const f=oo(t,a,c,(g,y)=>{r(),l&&l(g,y)});return n.push(f),f}function s(a){return n.find(c=>a(c))||null}return{query:o,find:s,setIndex:a=>{t.index=a},getIndex:()=>t.index,cleanup:r}}function pr(){}const Pn=Object.create(null);function so(e){if(!Pn[e]){const t=Sn(e);if(!t)return;const n=dr(t),r={config:t,redundancy:n};Pn[e]=r}return Pn[e]}function lo(e,t,n){let r,o;if(typeof e=="string"){const s=vn(e);if(!s)return n(void 0,424),pr;o=s.send;const i=so(e);i&&(r=i.redundancy)}else{const s=xn(e);if(s){r=dr(s);const i=e.resources?e.resources[0]:"",a=vn(i);a&&(o=a.send)}}return!r||!o?(n(void 0,424),pr):r.query(t,o,n)().abort}const gr="iconify2",Et="iconify",mr=Et+"-count",hr=Et+"-version",br=36e5,ao=168,co=50;function In(e,t){try{return e.getItem(t)}catch{}}function En(e,t,n){try{return e.setItem(t,n),!0}catch{}}function yr(e,t){try{e.removeItem(t)}catch{}}function Mn(e,t){return En(e,mr,t.toString())}function Ln(e){return parseInt(In(e,mr))||0}const Ut={local:!0,session:!0},wr={local:new Set,session:new Set};let An=!1;function uo(e){An=e}let Gt=typeof window>"u"?{}:window;function _r(e){const t=e+"Storage";try{if(Gt&&Gt[t]&&typeof Gt[t].length=="number")return Gt[t]}catch{}Ut[e]=!1}function vr(e,t){const n=_r(e);if(!n)return;const r=In(n,hr);if(r!==gr){if(r){const a=Ln(n);for(let c=0;c<a;c++)yr(n,Et+c.toString())}En(n,hr,gr),Mn(n,0);return}const o=Math.floor(Date.now()/br)-ao,s=a=>{const c=Et+a.toString(),l=In(n,c);if(typeof l=="string"){try{const f=JSON.parse(l);if(typeof f=="object"&&typeof f.cached=="number"&&f.cached>o&&typeof f.provider=="string"&&typeof f.data=="object"&&typeof f.data.prefix=="string"&&t(f,a))return!0}catch{}yr(n,c)}};let i=Ln(n);for(let a=i-1;a>=0;a--)s(a)||(a===i-1?(i--,Mn(n,i)):wr[e].add(a))}function xr(){if(!An){uo(!0);for(const e in Ut)vr(e,t=>{const n=t.data,r=t.provider,o=n.prefix,s=rt(r,o);if(!wn(s,n).length)return!1;const i=n.lastModified||-1;return s.lastModifiedCached=s.lastModifiedCached?Math.min(s.lastModifiedCached,i):i,!0})}}function fo(e,t){const n=e.lastModifiedCached;if(n&&n>=t)return n===t;if(e.lastModifiedCached=t,n)for(const r in Ut)vr(r,o=>{const s=o.data;return o.provider!==e.provider||s.prefix!==e.prefix||s.lastModified===t});return!0}function po(e,t){An||xr();function n(r){let o;if(!Ut[r]||!(o=_r(r)))return;const s=wr[r];let i;if(s.size)s.delete(i=Array.from(s).shift());else if(i=Ln(o),i>=co||!Mn(o,i+1))return;const a={cached:Math.floor(Date.now()/br),provider:e.provider,data:t};return En(o,Et+i.toString(),JSON.stringify(a))}t.lastModified&&!fo(e,t.lastModified)||Object.keys(t.icons).length&&(t.not_found&&(t=Object.assign({},t),delete t.not_found),n("local")||n("session"))}function kr(){}function go(e){e.iconsLoaderFlag||(e.iconsLoaderFlag=!0,setTimeout(()=>{e.iconsLoaderFlag=!1,eo(e)}))}function mo(e,t){e.iconsToLoad?e.iconsToLoad=e.iconsToLoad.concat(t).sort():e.iconsToLoad=t,e.iconsQueueFlag||(e.iconsQueueFlag=!0,setTimeout(()=>{e.iconsQueueFlag=!1;const{provider:n,prefix:r}=e,o=e.iconsToLoad;delete e.iconsToLoad;let s;if(!o||!(s=vn(n)))return;s.prepare(n,r,o).forEach(a=>{lo(n,a,c=>{if(typeof c!="object")a.icons.forEach(l=>{e.missing.add(l)});else try{const l=wn(e,c);if(!l.length)return;const f=e.pendingIcons;f&&l.forEach(g=>{f.delete(g)}),po(e,c)}catch(l){console.error(l)}go(e)})})}))}const ho=(e,t)=>{const n=ro(e,!0,sr()),r=Ji(n);if(!r.pending.length){let c=!0;return t&&setTimeout(()=>{c&&t(r.loaded,r.missing,r.pending,kr)}),()=>{c=!1}}const o=Object.create(null),s=[];let i,a;return r.pending.forEach(c=>{const{provider:l,prefix:f}=c;if(f===a&&l===i)return;i=l,a=f,s.push(rt(l,f));const g=o[l]||(o[l]=Object.create(null));g[f]||(g[f]=[])}),r.pending.forEach(c=>{const{provider:l,prefix:f,name:g}=c,y=rt(l,f),_=y.pendingIcons||(y.pendingIcons=new Set);_.has(g)||(_.add(g),o[l][f].push(g))}),s.forEach(c=>{const{provider:l,prefix:f}=c;o[l][f].length&&mo(c,o[l][f])}),t?no(t,r,s):kr};function bo(e,t){const n={...e};for(const r in t){const o=t[r],s=typeof o;r in lr?(o===null||o&&(s==="string"||s==="number"))&&(n[r]=o):s===typeof n[r]&&(n[r]=r==="rotate"?o%4:o)}return n}const yo=/[\s,]+/;function wo(e,t){t.split(yo).forEach(n=>{switch(n.trim()){case"horizontal":e.hFlip=!0;break;case"vertical":e.vFlip=!0;break}})}function _o(e,t=0){const n=e.replace(/^-?[0-9.]*/,"");function r(o){for(;o<0;)o+=4;return o%4}if(n===""){const o=parseInt(e);return isNaN(o)?0:r(o)}else if(n!==e){let o=0;switch(n){case"%":o=25;break;case"deg":o=90}if(o){let s=parseFloat(e.slice(0,e.length-n.length));return isNaN(s)?0:(s=s/o,s%1===0?r(s):0)}}return t}function vo(e,t){let n=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in t)n+=" "+r+'="'+t[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+e+"</svg>"}function xo(e){return e.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function ko(e){return"data:image/svg+xml,"+xo(e)}function So(e){return'url("'+ko(e)+'")'}const Sr={...ar,inline:!1},Po={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},Io={display:"inline-block"},Cn={"background-color":"currentColor"},Pr={"background-color":"transparent"},Ir={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},Er={"-webkit-mask":Cn,mask:Cn,background:Pr};for(const e in Er){const t=Er[e];for(const n in Ir)t[e+"-"+n]=Ir[n]}function Eo(e){return e+(e.match(/^[-0-9.]+$/)?"px":"")}function Mo(e,t){const n=bo(Sr,t),r=t.mode||"svg",o=r==="svg"?{...Po}:{};e.body.indexOf("xlink:")===-1&&delete o["xmlns:xlink"];let s=typeof t.style=="string"?t.style:"";for(let w in t){const m=t[w];if(m!==void 0)switch(w){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":n[w]=m===!0||m==="true"||m===1;break;case"flip":typeof m=="string"&&wo(n,m);break;case"color":s=s+(s.length>0&&s.trim().slice(-1)!==";"?";":"")+"color: "+m+"; ";break;case"rotate":typeof m=="string"?n[w]=_o(m):typeof m=="number"&&(n[w]=m);break;case"ariaHidden":case"aria-hidden":m!==!0&&m!=="true"&&delete o["aria-hidden"];break;default:if(w.slice(0,3)==="on:")break;Sr[w]===void 0&&(o[w]=m)}}const i=Ri(e,n),a=i.attributes;if(n.inline&&(s="vertical-align: -0.125em; "+s),r==="svg"){Object.assign(o,a),s!==""&&(o.style=s);let w=0,m=t.id;return typeof m=="string"&&(m=m.replace(/-/g,"_")),{svg:!0,attributes:o,body:Vi(i.body,m?()=>m+"ID"+w++:"iconifySvelte")}}const{body:c,width:l,height:f}=e,g=r==="mask"||(r==="bg"?!1:c.indexOf("currentColor")!==-1),y=vo(c,{...a,width:l+"",height:f+""}),v={"--svg":So(y)},L=w=>{const m=a[w];m&&(v[w]=Eo(m))};L("width"),L("height"),Object.assign(v,Io,g?Cn:Pr);let x="";for(const w in v)x+=w+": "+v[w]+";";return o.style=x+s,{svg:!1,attributes:o}}if(sr(!0),Ui("",Ki),typeof document<"u"&&typeof window<"u"){xr();const e=window;if(e.IconifyPreload!==void 0){const t=e.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof t=="object"&&t!==null&&(t instanceof Array?t:[t]).forEach(r=>{try{(typeof r!="object"||r===null||r instanceof Array||typeof r.icons!="object"||typeof r.prefix!="string"||!Di(r))&&console.error(n)}catch{console.error(n)}})}if(e.IconifyProviders!==void 0){const t=e.IconifyProviders;if(typeof t=="object"&&t!==null)for(let n in t){const r="IconifyProviders["+n+"] is invalid.";try{const o=t[n];if(typeof o!="object"||!o||o.resources===void 0)continue;Gi(n,o)||console.error(r)}catch{console.error(r)}}}}function Lo(e,t,n,r,o){function s(){t.loading&&(t.loading.abort(),t.loading=null)}if(typeof e=="object"&&e!==null&&typeof e.body=="string")return t.name="",s(),{data:{...$t,...e}};let i;if(typeof e!="string"||(i=Rt(e,!1,!0))===null)return s(),null;const a=Ti(i);if(!a)return n&&(!t.loading||t.loading.name!==e)&&(s(),t.name="",t.loading={name:e,abort:ho([i],r)}),null;s(),t.name!==e&&(t.name=e,o&&!t.destroyed&&o(e));const c=["iconify"];return i.prefix!==""&&c.push("iconify--"+i.prefix),i.provider!==""&&c.push("iconify--"+i.provider),{data:a,classes:c}}function Ao(e,t){return e?Mo({...$t,...e},t):null}function Mr(e){let t;function n(s,i){return s[0].svg?To:Co}let r=n(e),o=r(e);return{c(){o.c(),t=dn()},m(s,i){o.m(s,i),N(s,t,i)},p(s,i){r===(r=n(s))&&o?o.p(s,i):(o.d(1),o=r(s),o&&(o.c(),o.m(t.parentNode,t)))},d(s){s&&q(t),o.d(s)}}}function Co(e){let t,n=[e[0].attributes],r={};for(let o=0;o<n.length;o+=1)r=De(r,n[o]);return{c(){t=b("span"),Rn(t,r)},m(o,s){N(o,t,s)},p(o,s){Rn(t,r=Kn(n,[s&1&&o[0].attributes]))},d(o){o&&q(t)}}}function To(e){let t,n=e[0].body+"",r=[e[0].attributes],o={};for(let s=0;s<r.length;s+=1)o=De(o,r[s]);return{c(){t=ui("svg"),Nn(t,o)},m(s,i){N(s,t,i),t.innerHTML=n},p(s,i){i&1&&n!==(n=s[0].body+"")&&(t.innerHTML=n),Nn(t,o=Kn(r,[i&1&&s[0].attributes]))},d(s){s&&q(t)}}}function jo(e){let t,n=e[0]&&Mr(e);return{c(){n&&n.c(),t=dn()},m(r,o){n&&n.m(r,o),N(r,t,o)},p(r,[o]){r[0]?n?n.p(r,o):(n=Mr(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:K,o:K,d(r){r&&q(t),n&&n.d(r)}}}function Do(e,t,n){const r={name:"",loading:null,destroyed:!1};let o=!1,s=0,i;const a=l=>{typeof t.onLoad=="function"&&t.onLoad(l),bi()("load",{icon:l})};function c(){n(3,s++,s)}return Gn(()=>{n(2,o=!0)}),Xn(()=>{n(1,r.destroyed=!0,r),r.loading&&(r.loading.abort(),n(1,r.loading=null,r))}),e.$$set=l=>{n(6,t=De(De({},t),Fn(l)))},e.$$.update=()=>{{const l=Lo(t.icon,r,o,c,a);n(0,i=l?Ao(l.data,t):null),i&&l.classes&&n(0,i.attributes.class=(typeof t.class=="string"?t.class+" ":"")+l.classes.join(" "),i)}},t=Fn(t),[i,r,o,s]}class $ extends er{constructor(t){super(),Jn(this,t,Do,jo,Hn,{})}}function Oo(e){const t=e-1;return t*t*t+1}function Xt(e,{delay:t=0,duration:n=400,easing:r=Oo,axis:o="y"}={}){const s=getComputedStyle(e),i=+s.opacity,a=o==="y"?"height":"width",c=parseFloat(s[a]),l=o==="y"?["top","bottom"]:["left","right"],f=l.map(w=>`${w[0].toUpperCase()}${w.slice(1)}`),g=parseFloat(s[`padding${f[0]}`]),y=parseFloat(s[`padding${f[1]}`]),_=parseFloat(s[`margin${f[0]}`]),v=parseFloat(s[`margin${f[1]}`]),L=parseFloat(s[`border${f[0]}Width`]),x=parseFloat(s[`border${f[1]}Width`]);return{delay:t,duration:n,easing:r,css:w=>`overflow: hidden;opacity: ${Math.min(w*20,1)*i};${a}: ${w*c}px;padding-${l[0]}: ${w*g}px;padding-${l[1]}: ${w*y}px;margin-${l[0]}: ${w*_}px;margin-${l[1]}: ${w*v}px;border-${l[0]}-width: ${w*L}px;border-${l[1]}-width: ${w*x}px;`}}const oe=typeof window<"u"&&window.HEXO_MUSIC_CONFIG||{},M={metingConfig:{api:((Rr=oe.metingApi)==null?void 0:Rr.api)||"https://api.injahow.cn/meting/",server:((Nr=oe.metingApi)==null?void 0:Nr.server)||"netease",type:((Br=oe.metingApi)==null?void 0:Br.type)||"playlist",id:(($r=oe.metingApi)==null?void 0:$r.id)||"2619366284"},defaultPlaylistId:parseInt((Vr=oe.metingApi)==null?void 0:Vr.id)||2619366284,pageSize:oe.pageSize||60,enableKeyboardShortcuts:oe.enableKeyboardShortcuts!==!1,enableAutoPlay:oe.enableAutoPlay||!1,enableShuffle:oe.enableShuffle!==!1,enableRepeat:oe.enableRepeat||!1,defaultVolume:oe.defaultVolume||.7,preloadPages:oe.preloadPages||10,borderRadius:oe.borderRadius||"16px",miniWidth:oe.miniWidth||280,expandedWidth:oe.expandedWidth||360,expandedHeight:oe.expandedHeight||600,layout:oe.layout||"right",watermark:oe.watermark||"",startMinimizedMobile:oe.startMinimizedMobile||!1};class Ho{constructor(){Ve(this,"metingApi");Ve(this,"metingServer");Ve(this,"metingType");Ve(this,"metingId");Ve(this,"defaultPlaylistId");Ve(this,"pageSize");this.metingApi=M.metingConfig.api,this.metingServer=M.metingConfig.server,this.metingType=M.metingConfig.type,this.metingId=M.metingConfig.id,this.defaultPlaylistId=M.defaultPlaylistId,this.pageSize=M.pageSize}async getAllSongs(t=this.defaultPlaylistId,n,r){try{const o=await this.fetchFromMeting();return o.length===0?this.getMockAllSongsData():{songs:this.shuffleArray(o).slice(0,Math.min(60,o.length)),totalPages:Math.ceil(o.length/this.pageSize)}}catch(o){return console.error("获取歌曲失败:",o),this.getMockAllSongsData()}}async getMultiplePages(t=this.defaultPlaylistId,n=5,r=this.pageSize,o,s){console.log(`开始获取${n}页歌曲数据...`);try{const i=await this.fetchFromMeting();if(i.length===0)return this.getMockAllSongsData();const a=Math.ceil(i.length/r),c=i.slice(0,n*r);return console.log(`多页获取完成，总歌曲数量: ${c.length}`),{songs:c,totalPages:a}}catch(i){return console.error("获取歌曲失败:",i),this.getMockAllSongsData()}}async getPlaylist(t=this.defaultPlaylistId,n=1,r=this.pageSize,o,s,i=3){try{const a=await this.fetchFromMeting();if(a.length===0)return console.warn("Meting API 返回空数据，使用模拟数据"),this.getMockPlaylistData(n,r);const c=a.length,l=Math.ceil(c/r),f=(n-1)*r,g=f+r,y=a.slice(f,g);return{code:200,playlist_id:t,playlist_name:"网易云歌单",songs:y,pagination:{page:n,page_size:r,total:c,total_pages:l,has_next:n<l,has_prev:n>1}}}catch(a){return console.error("获取歌单失败:",a),this.getMockPlaylistData(n,r)}}async fetchFromMeting(){const t=new URLSearchParams({server:this.metingServer,type:this.metingType,id:this.metingId}),n=`${this.metingApi}?${t}`,r=new AbortController,o=setTimeout(()=>r.abort(),15e3);try{const s=await fetch(n,{method:"GET",headers:{Accept:"application/json"},signal:r.signal,mode:"cors"});if(clearTimeout(o),!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);const i=await s.json();if(Array.isArray(i))return i.map((a,c)=>({id:a.id||c+1,name:a.name||a.title||"未知歌曲",artist:a.artist||a.author||"未知艺术家",url:a.url||"",pic_url:a.pic||a.cover||""}));throw new Error("Meting API 返回格式不正确")}catch(s){throw clearTimeout(o),s}}shuffleArray(t){const n=[...t];for(let r=n.length-1;r>0;r--){const o=Math.floor(Math.random()*(r+1));[n[r],n[o]]=[n[o],n[r]]}return n}getMockAllSongsData(){const t=[];for(let n=1;n<=100;n++)t.push({id:n,name:`示例歌曲 ${n}`,artist:`示例艺术家 ${Math.ceil(n/10)}`,url:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav",pic_url:`https://via.placeholder.com/300x300/${Math.floor(Math.random()*16777215).toString(16)}/ffffff?text=Music${n}`});return{songs:t,totalPages:5}}getMockPlaylistData(t,n){const r=[{id:1,name:"示例歌曲 1",artist:"示例艺术家",url:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav",pic_url:"https://via.placeholder.com/300x300/4f46e5/ffffff?text=Music"},{id:2,name:"示例歌曲 2",artist:"示例艺术家 2",url:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav",pic_url:"https://via.placeholder.com/300x300/7c3aed/ffffff?text=Music"}];return{code:200,playlist_id:this.defaultPlaylistId,playlist_name:"示例歌单",songs:r,pagination:{page:t,page_size:n,total:r.length,total_pages:1,has_next:!1,has_prev:!1}}}async validateSongUrl(t){try{return(await fetch(t,{method:"HEAD"})).ok}catch{return!1}}async getSongMetadata(t){try{const n=await fetch(t,{method:"HEAD"});if(!n.ok)return null;const r=n.headers.get("content-length"),o=r?Number.parseInt(r,10):0;return new Promise(s=>{const i=new Audio;i.addEventListener("loadedmetadata",()=>{s({duration:i.duration,size:o})}),i.addEventListener("error",()=>{s(null)}),i.src=t})}catch{return null}}async searchSongs(t,n=1,r=this.pageSize){return console.log("搜索功能暂未实现:",{query:t,page:n,pageSize:r}),[]}async getRecommendedSongs(t=10){return console.log("推荐功能暂未实现:",{count:t}),[]}}const Lr=new Ho;function Ar(e,t,n){const r=e.slice();return r[83]=t[n],r[85]=n,r}function Cr(e){let t,n,r,o,s,i,a=!e[0].isExpanded&&Tr(e),c=e[0].isExpanded&&Dr(e),l=e[6]&&Hr(e);return{c(){t=b("div"),n=b("div"),a&&a.c(),r=A(),c&&c.c(),o=A(),l&&l.c(),d(n,"class","music-player-card card-base shadow-2xl backdrop-blur-sm svelte-6qw3wr"),He(n,"border-radius",M.borderRadius),d(t,"class","music-player-container fixed z-50 transition-all duration-300 ease-out svelte-6qw3wr"),d(t,"style",s="bottom: "+e[2].y+"px; "+(M.layout==="left"?"left":"right")+": "+e[2].x+"px; width: "+(e[0].isExpanded?M.expandedWidth:M.miniWidth)+"px; height: "+(e[0].isExpanded?M.expandedHeight:80)+"px; transform-origin: bottom "+(M.layout==="left"?"left":"right")+";"),z(t,"expanded",e[0].isExpanded),z(t,"dragging",e[1]),z(t,"mobile",e[3]),z(t,"android",e[4]),z(t,"ios",e[5]),z(t,"minimized-to-edge",e[6]),z(t,"auto-collapsed",e[7])},m(f,g){N(f,t,g),p(t,n),a&&a.m(n,null),p(n,r),c&&c.m(n,null),p(t,o),l&&l.m(t,null),i=!0},p(f,g){f[0].isExpanded?a&&(we(),E(a,1,1,()=>{a=null}),_e()):a?(a.p(f,g),g[0]&1&&k(a,1)):(a=Tr(f),a.c(),k(a,1),a.m(n,r)),f[0].isExpanded?c?(c.p(f,g),g[0]&1&&k(c,1)):(c=Dr(f),c.c(),k(c,1),c.m(n,null)):c&&(we(),E(c,1,1,()=>{c=null}),_e()),f[6]?l?(l.p(f,g),g[0]&64&&k(l,1)):(l=Hr(f),l.c(),k(l,1),l.m(t,null)):l&&(we(),E(l,1,1,()=>{l=null}),_e()),(!i||g[0]&5&&s!==(s="bottom: "+f[2].y+"px; "+(M.layout==="left"?"left":"right")+": "+f[2].x+"px; width: "+(f[0].isExpanded?M.expandedWidth:M.miniWidth)+"px; height: "+(f[0].isExpanded?M.expandedHeight:80)+"px; transform-origin: bottom "+(M.layout==="left"?"left":"right")+";"))&&d(t,"style",s),(!i||g[0]&1)&&z(t,"expanded",f[0].isExpanded),(!i||g[0]&2)&&z(t,"dragging",f[1]),(!i||g[0]&8)&&z(t,"mobile",f[3]),(!i||g[0]&16)&&z(t,"android",f[4]),(!i||g[0]&32)&&z(t,"ios",f[5]),(!i||g[0]&64)&&z(t,"minimized-to-edge",f[6]),(!i||g[0]&128)&&z(t,"auto-collapsed",f[7])},i(f){i||(k(a),k(c),k(l),i=!0)},o(f){E(a),E(c),E(l),i=!1},d(f){f&&q(t),a&&a.d(),c&&c.d(),l&&l.d()}}}function Tr(e){let t,n,r,o,s,i,a,c,l,f,g,y,_,v,L,x,w,m,I,C,G,S,H,Y,J,Q,le,de,qe,Ue;const it=[qo,Fo],X=[];function ve(T,ee){var ue;return(ue=T[0].currentSong)!=null&&ue.pic_url?0:1}s=ve(e),i=X[s]=it[s](e);let re=e[0].isPlaying&&jr();function pe(T,ee){return T[0].currentSong?Wo:zo}let xe=pe(e),F=xe(e);_=new $({props:{icon:"material-symbols:skip-previous",class:"text-lg"}});const ae=[Bo,No,Ro],ce=[];function Ie(T,ee){return T[0].isLoading?0:T[0].isPlaying?1:2}return w=Ie(e),m=ce[w]=ae[w](e),S=new $({props:{icon:"material-symbols:skip-next",class:"text-lg"}}),Q=new $({props:{icon:"material-symbols:expand-less",class:"text-lg"}}),{c(){t=b("div"),n=b("div"),n.innerHTML='<div class="w-1 h-6 bg-[var(--btn-content)] rounded-full opacity-60"></div>',r=A(),o=b("div"),i.c(),a=A(),re&&re.c(),c=A(),l=b("div"),F.c(),f=A(),g=b("div"),y=b("button"),B(_.$$.fragment),L=A(),x=b("button"),m.c(),C=A(),G=b("button"),B(S.$$.fragment),Y=A(),J=b("button"),B(Q.$$.fragment),d(n,"class","drag-handle cursor-move flex-shrink-0 w-2 h-8 flex items-center justify-center opacity-50 hover:opacity-100 transition-opacity svelte-6qw3wr"),d(n,"role","button"),d(n,"tabindex","0"),d(n,"aria-label","拖拽音乐播放器"),d(o,"class","album-cover relative overflow-hidden rounded-lg"),d(l,"class","song-info flex-1 min-w-0"),d(y,"class","control-btn btn-plain rounded-full w-8 h-8 flex items-center justify-center svelte-6qw3wr"),y.disabled=v=e[0].isLoading,d(x,"class","play-pause-btn btn-plain rounded-full w-10 h-10 flex items-center justify-center bg-[var(--primary)] text-white svelte-6qw3wr"),x.disabled=I=!e[0].currentSong||e[0].isLoading,d(G,"class","control-btn btn-plain rounded-full w-8 h-8 flex items-center justify-center svelte-6qw3wr"),G.disabled=H=e[0].isLoading,d(g,"class","play-controls flex items-center gap-2"),d(J,"class","expand-btn btn-plain rounded-full w-8 h-8 flex items-center justify-center"),d(J,"title","展开播放器"),d(t,"class","mini-player flex items-center gap-3 p-4 svelte-6qw3wr")},m(T,ee){N(T,t,ee),p(t,n),p(t,r),p(t,o),X[s].m(o,null),p(o,a),re&&re.m(o,null),p(t,c),p(t,l),F.m(l,null),p(t,f),p(t,g),p(g,y),W(_,y,null),p(g,L),p(g,x),ce[w].m(x,null),p(g,C),p(g,G),W(S,G,null),p(t,Y),p(t,J),W(Q,J,null),de=!0,qe||(Ue=[Z(n,"mousedown",e[24]),Z(y,"click",e[28]),Z(x,"click",e[29]),Z(G,"click",e[30]),Z(J,"click",e[31])],qe=!0)},p(T,ee){let ue=s;s=ve(T),s===ue?X[s].p(T,ee):(we(),E(X[ue],1,1,()=>{X[ue]=null}),_e(),i=X[s],i?i.p(T,ee):(i=X[s]=it[s](T),i.c()),k(i,1),i.m(o,a)),T[0].isPlaying?re||(re=jr(),re.c(),re.m(o,null)):re&&(re.d(1),re=null),xe===(xe=pe(T))&&F?F.p(T,ee):(F.d(1),F=xe(T),F&&(F.c(),F.m(l,null))),(!de||ee[0]&1&&v!==(v=T[0].isLoading))&&(y.disabled=v);let ke=w;w=Ie(T),w!==ke&&(we(),E(ce[ke],1,1,()=>{ce[ke]=null}),_e(),m=ce[w],m||(m=ce[w]=ae[w](T),m.c()),k(m,1),m.m(x,null)),(!de||ee[0]&1&&I!==(I=!T[0].currentSong||T[0].isLoading))&&(x.disabled=I),(!de||ee[0]&1&&H!==(H=T[0].isLoading))&&(G.disabled=H)},i(T){de||(k(i),k(_.$$.fragment,T),k(m),k(S.$$.fragment,T),k(Q.$$.fragment,T),T&&pt(()=>{de&&(le||(le=Wt(t,Xt,{duration:400,axis:"y"},!0)),le.run(1))}),de=!0)},o(T){E(i),E(_.$$.fragment,T),E(m),E(S.$$.fragment,T),E(Q.$$.fragment,T),T&&(le||(le=Wt(t,Xt,{duration:400,axis:"y"},!1)),le.run(0)),de=!1},d(T){T&&q(t),X[s].d(),re&&re.d(),F.d(),R(_),ce[w].d(),R(S),R(Q),T&&le&&le.end(),qe=!1,Oe(Ue)}}}function Fo(e){let t,n,r;return n=new $({props:{icon:"material-symbols:music-note",class:"text-[var(--primary)] text-xl"}}),{c(){t=b("div"),B(n.$$.fragment),d(t,"class","w-12 h-12 bg-[var(--btn-regular-bg)] flex items-center justify-center rounded-lg")},m(o,s){N(o,t,s),W(n,t,null),r=!0},p:K,i(o){r||(k(n.$$.fragment,o),r=!0)},o(o){E(n.$$.fragment,o),r=!1},d(o){o&&q(t),R(n)}}}function qo(e){let t,n;return{c(){t=b("img"),Ot(t.src,n=e[0].currentSong.pic_url)||d(t,"src",n),d(t,"alt","专辑封面"),d(t,"class","w-12 h-12 object-cover svelte-6qw3wr")},m(r,o){N(r,t,o)},p(r,o){o[0]&1&&!Ot(t.src,n=r[0].currentSong.pic_url)&&d(t,"src",n)},i:K,o:K,d(r){r&&q(t)}}}function jr(e){let t;return{c(){t=b("div"),t.innerHTML='<div class="audio-visualizer svelte-6qw3wr"><div class="bar svelte-6qw3wr"></div> <div class="bar svelte-6qw3wr"></div> <div class="bar svelte-6qw3wr"></div></div>',d(t,"class","absolute inset-0 bg-black/20 flex items-center justify-center")},m(n,r){N(n,t,r)},d(n){n&&q(t)}}}function zo(e){let t;return{c(){t=b("div"),t.textContent="暂无歌曲",d(t,"class","text-sm text-[var(--btn-content)]")},m(n,r){N(n,t,r)},p:K,d(n){n&&q(t)}}}function Wo(e){let t,n=e[0].currentSong.name+"",r,o,s,i=e[0].currentSong.artist+"",a;return{c(){t=b("div"),r=ie(n),o=A(),s=b("div"),a=ie(i),d(t,"class","song-title text-sm font-medium text-[var(--deep-text)] truncate"),d(s,"class","artist-name text-xs text-[var(--btn-content)] truncate")},m(c,l){N(c,t,l),p(t,r),N(c,o,l),N(c,s,l),p(s,a)},p(c,l){l[0]&1&&n!==(n=c[0].currentSong.name+"")&&ye(r,n),l[0]&1&&i!==(i=c[0].currentSong.artist+"")&&ye(a,i)},d(c){c&&(q(t),q(o),q(s))}}}function Ro(e){let t,n;return t=new $({props:{icon:"material-symbols:play-arrow",class:"text-lg"}}),{c(){B(t.$$.fragment)},m(r,o){W(t,r,o),n=!0},i(r){n||(k(t.$$.fragment,r),n=!0)},o(r){E(t.$$.fragment,r),n=!1},d(r){R(t,r)}}}function No(e){let t,n;return t=new $({props:{icon:"material-symbols:pause",class:"text-lg"}}),{c(){B(t.$$.fragment)},m(r,o){W(t,r,o),n=!0},i(r){n||(k(t.$$.fragment,r),n=!0)},o(r){E(t.$$.fragment,r),n=!1},d(r){R(t,r)}}}function Bo(e){let t,n;return t=new $({props:{icon:"material-symbols:hourglass-empty",class:"text-lg animate-spin"}}),{c(){B(t.$$.fragment)},m(r,o){W(t,r,o),n=!0},i(r){n||(k(t.$$.fragment,r),n=!0)},o(r){E(t.$$.fragment,r),n=!1},d(r){R(t,r)}}}function Dr(e){let t,n,r,o,s,i,a,c,l,f,g,y,_,v,L,x,w,m,I,C,G,S,H,Y,J,Q,le,de,qe,Ue,it,X,ve,re,pe,xe,F,ae,ce,Ie,T,ee,ue,ke,Lt,Se,ge,me,ze,Ge,We,Re,ot,Ee,Ne,Me,st,he,Xe,Yt,se,Ze,Qt,Be,mt,Kt,Ye,Jt,Le,Qe,ht,en,Ke,Ae,tn,bt=e[0].currentPage+"",At,nn,yt=e[0].totalPages+"",Ct,rn,on,u,P,D,V,O,ne,Ce,Je,sn,et,Tt,Ur,be,Gr,lt,Xr,ln,Zr,$e,wt,an,Yr,jt,tt,U,Tn,Qr;s=new $({props:{icon:"material-symbols:drag-indicator",class:"text-[var(--btn-content)] text-lg flex-shrink-0"}}),g=new $({props:{icon:M.layout==="left"?"material-symbols:keyboard-double-arrow-left":"material-symbols:keyboard-double-arrow-right",class:"text-lg"}}),v=new $({props:{icon:"material-symbols:expand-more",class:"text-lg"}});let _t=M.watermark&&$o();const Kr=[Uo,Vo],nt=[];function Jr(h,j){var Pe;return(Pe=h[0].currentSong)!=null&&Pe.pic_url?0:1}I=Jr(e),C=nt[I]=Kr[I](e);function ei(h,j){return h[0].currentSong?Xo:Go}let cn=ei(e),Te=cn(e);ce=new $({props:{icon:"material-symbols:shuffle",class:"text-xl"}}),ue=new $({props:{icon:"material-symbols:skip-previous",class:"text-2xl"}});const ti=[Qo,Yo,Zo],at=[];function ni(h,j){return h[0].isLoading?0:h[0].isPlaying?1:2}ge=ni(e),me=at[ge]=ti[ge](e),Re=new $({props:{icon:"material-symbols:skip-next",class:"text-2xl"}}),Me=new $({props:{icon:"material-symbols:repeat",class:"text-xl"}}),Xe=new $({props:{icon:"material-symbols:volume-down",class:"text-lg text-[var(--btn-content)]"}}),Ye=new $({props:{icon:"material-symbols:volume-up",class:"text-lg text-[var(--btn-content)]"}}),P=new $({props:{icon:"material-symbols:refresh",class:"text-sm text-[var(--primary)]"}}),Ce=new $({props:{icon:"material-symbols:chevron-left",class:"text-base"}}),wt=new $({props:{icon:"material-symbols:chevron-right",class:"text-base"}});let ct=Qn(e[0].playlist),te=[];for(let h=0;h<ct.length;h+=1)te[h]=Or(Ar(e,ct,h));const us=h=>E(te[h],1,1,()=>{te[h]=null});return{c(){t=b("div"),n=b("div"),r=b("div"),o=b("div"),B(s.$$.fragment),i=A(),a=b("h3"),a.textContent="音乐播放器",c=A(),l=b("div"),f=b("button"),B(g.$$.fragment),y=A(),_=b("button"),B(v.$$.fragment),L=A(),_t&&_t.c(),x=A(),w=b("div"),m=b("div"),C.c(),G=A(),S=b("div"),Te.c(),H=A(),Y=b("div"),J=b("div"),Q=b("span"),le=ie(e[13]),de=A(),qe=b("span"),Ue=ie(e[12]),it=A(),X=b("div"),ve=b("div"),re=A(),pe=b("div"),xe=A(),F=b("div"),ae=b("button"),B(ce.$$.fragment),T=A(),ee=b("button"),B(ue.$$.fragment),Lt=A(),Se=b("button"),me.c(),Ge=A(),We=b("button"),B(Re.$$.fragment),Ee=A(),Ne=b("button"),B(Me.$$.fragment),st=A(),he=b("div"),B(Xe.$$.fragment),Yt=A(),se=b("div"),Ze=b("div"),Qt=A(),Be=b("div"),Kt=A(),B(Ye.$$.fragment),Jt=A(),Le=b("div"),Qe=b("div"),ht=b("span"),ht.textContent="歌单",en=A(),Ke=b("div"),Ae=b("div"),tn=ie("第 "),At=ie(bt),nn=ie(" 页 / 共 "),Ct=ie(yt),rn=ie(" 页"),on=A(),u=b("button"),B(P.$$.fragment),V=A(),O=b("div"),ne=b("button"),B(Ce.$$.fragment),sn=A(),et=b("div"),Tt=b("label"),Tt.textContent="每页:",Ur=A(),be=b("input"),Gr=A(),lt=b("button"),Xr=ie("应用"),Zr=A(),$e=b("button"),B(wt.$$.fragment),Yr=A(),jt=b("div");for(let h=0;h<te.length;h+=1)te[h].c();d(a,"class","text-lg font-semibold text-[var(--deep-text)] truncate"),d(o,"class","header-left flex items-center gap-2 cursor-move flex-1 min-w-0"),d(o,"role","button"),d(o,"tabindex","0"),d(o,"aria-label","拖拽音乐播放器"),d(f,"class","edge-btn btn-plain rounded-full w-8 h-8 flex items-center justify-center"),d(f,"title","收回到边缘"),d(_,"class","collapse-btn btn-plain rounded-full w-8 h-8 flex items-center justify-center"),d(_,"title","收起播放器"),d(l,"class","header-controls flex items-center gap-2 flex-shrink-0"),d(r,"class","header-top flex items-center justify-between"),d(n,"class","player-header border-b border-[var(--border)] p-4 pb-2"),d(m,"class","album-cover-large relative overflow-hidden rounded-xl"),d(S,"class","song-details flex-1 min-w-0 svelte-6qw3wr"),d(w,"class","current-song flex items-center gap-4 mb-6"),d(J,"class","time-display flex justify-between text-xs text-[var(--btn-content)] mb-2"),d(ve,"class","progress-bar-fill absolute top-0 left-0 h-full bg-[var(--primary)] rounded-full transition-all"),He(ve,"width",e[11]+"%"),d(pe,"class","progress-thumb absolute top-1/2 w-4 h-4 bg-[var(--primary)] rounded-full shadow-md transform -translate-y-1/2 transition-all svelte-6qw3wr"),He(pe,"left","calc("+e[11]+"% - 8px)"),d(X,"class","progress-bar-container relative h-2 bg-[var(--btn-regular-bg)] rounded-full cursor-pointer svelte-6qw3wr"),d(X,"role","slider"),d(X,"tabindex","0"),d(X,"aria-label","音乐进度"),d(X,"aria-valuenow",e[11]),d(X,"aria-valuemin","0"),d(X,"aria-valuemax","100"),d(Y,"class","progress-section mb-6"),d(ae,"class","control-btn btn-plain rounded-full w-12 h-12 flex items-center justify-center svelte-6qw3wr"),d(ae,"title",Ie=e[0].isShuffle?"关闭随机播放":"开启随机播放"),z(ae,"active",e[0].isShuffle),d(ee,"class","control-btn btn-plain rounded-full w-12 h-12 flex items-center justify-center svelte-6qw3wr"),ee.disabled=ke=e[0].isLoading,d(Se,"class","play-pause-btn-large btn-plain rounded-full w-16 h-16 flex items-center justify-center bg-[var(--primary)] text-white shadow-lg svelte-6qw3wr"),Se.disabled=ze=!e[0].currentSong||e[0].isLoading,d(We,"class","control-btn btn-plain rounded-full w-12 h-12 flex items-center justify-center svelte-6qw3wr"),We.disabled=ot=e[0].isLoading,d(Ne,"class","control-btn btn-plain rounded-full w-12 h-12 flex items-center justify-center svelte-6qw3wr"),z(Ne,"active",e[0].isRepeat),d(F,"class","playback-controls flex items-center justify-center gap-4 mb-6"),d(Ze,"class","volume-fill absolute top-0 left-0 h-full bg-[var(--primary)] rounded-full"),He(Ze,"width",e[0].volume*100+"%"),d(Be,"class","volume-thumb absolute top-1/2 w-4 h-4 bg-[var(--primary)] rounded-full shadow-md transform -translate-y-1/2 svelte-6qw3wr"),He(Be,"left","calc("+e[0].volume*100+"% - 8px)"),d(se,"class","volume-slider-container flex-1 relative h-2 bg-[var(--btn-regular-bg)] rounded-full cursor-pointer svelte-6qw3wr"),d(se,"role","slider"),d(se,"tabindex","0"),d(se,"aria-label","音量控制"),d(se,"aria-valuenow",mt=e[0].volume*100),d(se,"aria-valuemin","0"),d(se,"aria-valuemax","100"),d(he,"class","volume-section flex items-center gap-3 mb-6"),d(ht,"class","text-sm font-medium text-[var(--deep-text)]"),d(Ae,"class","page-info text-xs text-[var(--btn-content)]"),d(u,"class","refresh-btn btn-card rounded-lg px-2 py-1 text-xs hover:bg-[var(--btn-hover-bg)] transition-colors"),u.disabled=D=e[0].isLoading,d(u,"title","重新随机排序歌曲"),d(u,"aria-label","重新随机排序歌曲"),d(Ke,"class","flex items-center gap-2"),d(Qe,"class","pagination-header flex items-center justify-between mb-3"),d(ne,"class","page-btn btn-card rounded-lg px-3 py-2 text-sm svelte-6qw3wr"),ne.disabled=Je=e[0].currentPage<=1||e[0].isLoading,z(ne,"disabled",e[0].currentPage<=1),d(Tt,"for","page-size-input"),d(Tt,"class","text-xs text-[var(--btn-content)]"),d(be,"id","page-size-input"),d(be,"type","number"),d(be,"min","20"),d(be,"max","100"),d(be,"class","page-size-input w-16 px-2 py-1 text-xs bg-[var(--btn-regular-bg)] border border-[var(--line-divider)] rounded focus:outline-none focus:border-[var(--primary)] svelte-6qw3wr"),d(lt,"class","apply-btn btn-card rounded px-2 py-1 text-xs"),lt.disabled=ln=e[0].isLoading,d(et,"class","page-size-control flex items-center gap-2 flex-1"),d($e,"class","page-btn btn-card rounded-lg px-3 py-2 text-sm svelte-6qw3wr"),$e.disabled=an=e[0].currentPage>=e[0].totalPages||e[0].isLoading,z($e,"disabled",e[0].currentPage>=e[0].totalPages),d(O,"class","pagination-controls flex items-center gap-2 mb-4"),d(jt,"class","playlist max-h-48 overflow-y-auto svelte-6qw3wr"),d(Le,"class","pagination-section"),d(t,"class","expanded-player p-6 svelte-6qw3wr")},m(h,j){N(h,t,j),p(t,n),p(n,r),p(r,o),W(s,o,null),p(o,i),p(o,a),p(r,c),p(r,l),p(l,f),W(g,f,null),p(l,y),p(l,_),W(v,_,null),p(n,L),_t&&_t.m(n,null),p(t,x),p(t,w),p(w,m),nt[I].m(m,null),p(w,G),p(w,S),Te.m(S,null),p(t,H),p(t,Y),p(Y,J),p(J,Q),p(Q,le),p(J,de),p(J,qe),p(qe,Ue),p(Y,it),p(Y,X),p(X,ve),p(X,re),p(X,pe),e[33](X),p(t,xe),p(t,F),p(F,ae),W(ce,ae,null),p(F,T),p(F,ee),W(ue,ee,null),p(F,Lt),p(F,Se),at[ge].m(Se,null),p(F,Ge),p(F,We),W(Re,We,null),p(F,Ee),p(F,Ne),W(Me,Ne,null),p(t,st),p(t,he),W(Xe,he,null),p(he,Yt),p(he,se),p(se,Ze),p(se,Qt),p(se,Be),e[35](se),p(he,Kt),W(Ye,he,null),p(t,Jt),p(t,Le),p(Le,Qe),p(Qe,ht),p(Qe,en),p(Qe,Ke),p(Ke,Ae),p(Ae,tn),p(Ae,At),p(Ae,nn),p(Ae,Ct),p(Ae,rn),p(Ke,on),p(Ke,u),W(P,u,null),p(Le,V),p(Le,O),p(O,ne),W(Ce,ne,null),p(O,sn),p(O,et),p(et,Tt),p(et,Ur),p(et,be),$n(be,e[10]),p(et,Gr),p(et,lt),p(lt,Xr),p(O,Zr),p(O,$e),W(wt,$e,null),p(Le,Yr),p(Le,jt);for(let Pe=0;Pe<te.length;Pe+=1)te[Pe]&&te[Pe].m(jt,null);U=!0,Tn||(Qr=[Z(o,"mousedown",e[24]),Z(f,"click",e[25]),Z(_,"click",e[32]),Z(X,"mousedown",e[22]),Z(ae,"click",e[14]),Z(ee,"click",e[17]),Z(Se,"click",e[16]),Z(We,"click",e[18]),Z(Ne,"click",e[34]),Z(se,"mousedown",e[23]),Z(u,"click",e[15]),Z(ne,"click",e[36]),Z(be,"input",e[37]),Z(be,"blur",e[21]),Z(be,"keydown",e[38]),Z(lt,"click",e[39]),Z($e,"click",e[40])],Tn=!0)},p(h,j){let Pe=I;I=Jr(h),I===Pe?nt[I].p(h,j):(we(),E(nt[Pe],1,1,()=>{nt[Pe]=null}),_e(),C=nt[I],C?C.p(h,j):(C=nt[I]=Kr[I](h),C.c()),k(C,1),C.m(m,null)),cn===(cn=ei(h))&&Te?Te.p(h,j):(Te.d(1),Te=cn(h),Te&&(Te.c(),Te.m(S,null))),(!U||j[0]&8192)&&ye(le,h[13]),(!U||j[0]&4096)&&ye(Ue,h[12]),(!U||j[0]&2048)&&He(ve,"width",h[11]+"%"),(!U||j[0]&2048)&&He(pe,"left","calc("+h[11]+"% - 8px)"),(!U||j[0]&2048)&&d(X,"aria-valuenow",h[11]),(!U||j[0]&1&&Ie!==(Ie=h[0].isShuffle?"关闭随机播放":"开启随机播放"))&&d(ae,"title",Ie),(!U||j[0]&1)&&z(ae,"active",h[0].isShuffle),(!U||j[0]&1&&ke!==(ke=h[0].isLoading))&&(ee.disabled=ke);let jn=ge;if(ge=ni(h),ge!==jn&&(we(),E(at[jn],1,1,()=>{at[jn]=null}),_e(),me=at[ge],me||(me=at[ge]=ti[ge](h),me.c()),k(me,1),me.m(Se,null)),(!U||j[0]&1&&ze!==(ze=!h[0].currentSong||h[0].isLoading))&&(Se.disabled=ze),(!U||j[0]&1&&ot!==(ot=h[0].isLoading))&&(We.disabled=ot),(!U||j[0]&1)&&z(Ne,"active",h[0].isRepeat),(!U||j[0]&1)&&He(Ze,"width",h[0].volume*100+"%"),(!U||j[0]&1)&&He(Be,"left","calc("+h[0].volume*100+"% - 8px)"),(!U||j[0]&1&&mt!==(mt=h[0].volume*100))&&d(se,"aria-valuenow",mt),(!U||j[0]&1)&&bt!==(bt=h[0].currentPage+"")&&ye(At,bt),(!U||j[0]&1)&&yt!==(yt=h[0].totalPages+"")&&ye(Ct,yt),(!U||j[0]&1&&D!==(D=h[0].isLoading))&&(u.disabled=D),(!U||j[0]&1&&Je!==(Je=h[0].currentPage<=1||h[0].isLoading))&&(ne.disabled=Je),(!U||j[0]&1)&&z(ne,"disabled",h[0].currentPage<=1),j[0]&1024&&Bn(be.value)!==h[10]&&$n(be,h[10]),(!U||j[0]&1&&ln!==(ln=h[0].isLoading))&&(lt.disabled=ln),(!U||j[0]&1&&an!==(an=h[0].currentPage>=h[0].totalPages||h[0].isLoading))&&($e.disabled=an),(!U||j[0]&1)&&z($e,"disabled",h[0].currentPage>=h[0].totalPages),j[0]&524289){ct=Qn(h[0].playlist);let fe;for(fe=0;fe<ct.length;fe+=1){const ri=Ar(h,ct,fe);te[fe]?(te[fe].p(ri,j),k(te[fe],1)):(te[fe]=Or(ri),te[fe].c(),k(te[fe],1),te[fe].m(jt,null))}for(we(),fe=ct.length;fe<te.length;fe+=1)us(fe);_e()}},i(h){if(!U){k(s.$$.fragment,h),k(g.$$.fragment,h),k(v.$$.fragment,h),k(C),k(ce.$$.fragment,h),k(ue.$$.fragment,h),k(me),k(Re.$$.fragment,h),k(Me.$$.fragment,h),k(Xe.$$.fragment,h),k(Ye.$$.fragment,h),k(P.$$.fragment,h),k(Ce.$$.fragment,h),k(wt.$$.fragment,h);for(let j=0;j<ct.length;j+=1)k(te[j]);h&&pt(()=>{U&&(tt||(tt=Wt(t,Xt,{duration:400,axis:"y"},!0)),tt.run(1))}),U=!0}},o(h){E(s.$$.fragment,h),E(g.$$.fragment,h),E(v.$$.fragment,h),E(C),E(ce.$$.fragment,h),E(ue.$$.fragment,h),E(me),E(Re.$$.fragment,h),E(Me.$$.fragment,h),E(Xe.$$.fragment,h),E(Ye.$$.fragment,h),E(P.$$.fragment,h),E(Ce.$$.fragment,h),E(wt.$$.fragment,h),te=te.filter(Boolean);for(let j=0;j<te.length;j+=1)E(te[j]);h&&(tt||(tt=Wt(t,Xt,{duration:400,axis:"y"},!1)),tt.run(0)),U=!1},d(h){h&&q(t),R(s),R(g),R(v),_t&&_t.d(),nt[I].d(),Te.d(),e[33](null),R(ce),R(ue),at[ge].d(),R(Re),R(Me),R(Xe),e[35](null),R(Ye),R(P),R(Ce),R(wt),ci(te,h),h&&tt&&tt.end(),Tn=!1,Oe(Qr)}}}function $o(e){let t,n=M.watermark+"";return{c(){t=b("div"),d(t,"class","watermark text-[10px] leading-tight opacity-50 select-none text-right mt-1 break-words text-[var(--deep-text)]")},m(r,o){N(r,t,o),t.innerHTML=n},d(r){r&&q(t)}}}function Vo(e){let t,n,r;return n=new $({props:{icon:"material-symbols:music-note",class:"text-[var(--primary)] text-3xl"}}),{c(){t=b("div"),B(n.$$.fragment),d(t,"class","w-20 h-20 bg-[var(--btn-regular-bg)] flex items-center justify-center rounded-xl")},m(o,s){N(o,t,s),W(n,t,null),r=!0},p:K,i(o){r||(k(n.$$.fragment,o),r=!0)},o(o){E(n.$$.fragment,o),r=!1},d(o){o&&q(t),R(n)}}}function Uo(e){let t,n;return{c(){t=b("img"),Ot(t.src,n=e[0].currentSong.pic_url)||d(t,"src",n),d(t,"alt","专辑封面"),d(t,"class","w-20 h-20 object-cover svelte-6qw3wr")},m(r,o){N(r,t,o)},p(r,o){o[0]&1&&!Ot(t.src,n=r[0].currentSong.pic_url)&&d(t,"src",n)},i:K,o:K,d(r){r&&q(t)}}}function Go(e){let t;return{c(){t=b("p"),t.textContent="暂无歌曲",d(t,"class","text-sm text-[var(--btn-content)]")},m(n,r){N(n,t,r)},p:K,d(n){n&&q(t)}}}function Xo(e){let t,n=e[0].currentSong.name+"",r,o,s,i=e[0].currentSong.artist+"",a;return{c(){t=b("h4"),r=ie(n),o=A(),s=b("p"),a=ie(i),d(t,"class","song-title text-base font-medium text-[var(--deep-text)] mb-1 truncate"),d(s,"class","artist-name text-sm text-[var(--btn-content)] truncate")},m(c,l){N(c,t,l),p(t,r),N(c,o,l),N(c,s,l),p(s,a)},p(c,l){l[0]&1&&n!==(n=c[0].currentSong.name+"")&&ye(r,n),l[0]&1&&i!==(i=c[0].currentSong.artist+"")&&ye(a,i)},d(c){c&&(q(t),q(o),q(s))}}}function Zo(e){let t,n;return t=new $({props:{icon:"material-symbols:play-arrow",class:"text-2xl"}}),{c(){B(t.$$.fragment)},m(r,o){W(t,r,o),n=!0},i(r){n||(k(t.$$.fragment,r),n=!0)},o(r){E(t.$$.fragment,r),n=!1},d(r){R(t,r)}}}function Yo(e){let t,n;return t=new $({props:{icon:"material-symbols:pause",class:"text-2xl"}}),{c(){B(t.$$.fragment)},m(r,o){W(t,r,o),n=!0},i(r){n||(k(t.$$.fragment,r),n=!0)},o(r){E(t.$$.fragment,r),n=!1},d(r){R(t,r)}}}function Qo(e){let t,n;return t=new $({props:{icon:"material-symbols:hourglass-empty",class:"text-2xl animate-spin"}}),{c(){B(t.$$.fragment)},m(r,o){W(t,r,o),n=!0},i(r){n||(k(t.$$.fragment,r),n=!0)},o(r){E(t.$$.fragment,r),n=!1},d(r){R(t,r)}}}function Ko(e){let t=e[85]+1+"",n;return{c(){n=ie(t)},m(r,o){N(r,n,o)},i:K,o:K,d(r){r&&q(n)}}}function Jo(e){let t,n;return t=new $({props:{icon:"material-symbols:graphic-eq",class:"text-[var(--primary)] animate-pulse"}}),{c(){B(t.$$.fragment)},m(r,o){W(t,r,o),n=!0},i(r){n||(k(t.$$.fragment,r),n=!0)},o(r){E(t.$$.fragment,r),n=!1},d(r){R(t,r)}}}function Or(e){let t,n,r,o,s,i,a,c=e[83].name+"",l,f,g,y=e[83].artist+"",_,v,L,x,w;const m=[Jo,Ko],I=[];function C(S,H){return S[85]===S[0].currentIndex&&S[0].isPlaying?0:1}r=C(e),o=I[r]=m[r](e);function G(){return e[41](e[85])}return{c(){t=b("button"),n=b("div"),o.c(),s=A(),i=b("div"),a=b("div"),l=ie(c),f=A(),g=b("div"),_=ie(y),v=A(),d(n,"class","song-index w-6 text-xs text-center text-[var(--btn-content)]"),d(a,"class","song-name text-sm font-medium text-[var(--deep-text)] truncate svelte-6qw3wr"),d(g,"class","artist-name text-xs text-[var(--btn-content)] truncate"),d(i,"class","song-details flex-1 min-w-0 svelte-6qw3wr"),d(t,"class","song-item w-full flex items-center gap-3 p-2 rounded-lg text-left transition-colors svelte-6qw3wr"),z(t,"active",e[85]===e[0].currentIndex),z(t,"playing",e[85]===e[0].currentIndex&&e[0].isPlaying)},m(S,H){N(S,t,H),p(t,n),I[r].m(n,null),p(t,s),p(t,i),p(i,a),p(a,l),p(i,f),p(i,g),p(g,_),p(t,v),L=!0,x||(w=Z(t,"click",G),x=!0)},p(S,H){e=S;let Y=r;r=C(e),r!==Y&&(we(),E(I[Y],1,1,()=>{I[Y]=null}),_e(),o=I[r],o||(o=I[r]=m[r](e),o.c()),k(o,1),o.m(n,null)),(!L||H[0]&1)&&c!==(c=e[83].name+"")&&ye(l,c),(!L||H[0]&1)&&y!==(y=e[83].artist+"")&&ye(_,y),(!L||H[0]&1)&&z(t,"active",e[85]===e[0].currentIndex),(!L||H[0]&1)&&z(t,"playing",e[85]===e[0].currentIndex&&e[0].isPlaying)},i(S){L||(k(o),L=!0)},o(S){E(o),L=!1},d(S){S&&q(t),I[r].d(),x=!1,w()}}}function Hr(e){let t,n,r,o,s,i,a;const c=[ts,es],l=[];function f(g,y){return g[7]&&g[0].currentSong?0:1}return n=f(e),r=l[n]=c[n](e),{c(){t=b("div"),r.c(),d(t,"class","edge-handle fixed z-50 cursor-pointer svelte-6qw3wr"),d(t,"style",o="bottom: "+(e[2].y+20)+"px; "+(M.layout==="left"?"left":"right")+": 0px;"),d(t,"role","button"),d(t,"tabindex","0"),d(t,"aria-label","展开音乐播放器"),z(t,"auto-collapsed-handle",e[7])},m(g,y){N(g,t,y),l[n].m(t,null),s=!0,i||(a=[Z(t,"click",e[26]),Z(t,"keydown",e[42])],i=!0)},p(g,y){let _=n;n=f(g),n===_?l[n].p(g,y):(we(),E(l[_],1,1,()=>{l[_]=null}),_e(),r=l[n],r?r.p(g,y):(r=l[n]=c[n](g),r.c()),k(r,1),r.m(t,null)),(!s||y[0]&4&&o!==(o="bottom: "+(g[2].y+20)+"px; "+(M.layout==="left"?"left":"right")+": 0px;"))&&d(t,"style",o),(!s||y[0]&128)&&z(t,"auto-collapsed-handle",g[7])},i(g){s||(k(r),s=!0)},o(g){E(r),s=!1},d(g){g&&q(t),l[n].d(),i=!1,Oe(a)}}}function es(e){let t,n,r;return n=new $({props:{icon:"material-symbols:music-note",class:"text-lg"}}),{c(){t=b("div"),B(n.$$.fragment),d(t,"class","handle-tab bg-[var(--primary)] text-white p-2 shadow-lg "+(M.layout==="left"?"rounded-r-lg":"rounded-l-lg")+" svelte-6qw3wr")},m(o,s){N(o,t,s),W(n,t,null),r=!0},p:K,i(o){r||(k(n.$$.fragment,o),r=!0)},o(o){E(n.$$.fragment,o),r=!1},d(o){o&&q(t),R(n)}}}function ts(e){let t,n,r,o=e[0].currentSong.name+"",s,i,a,c=e[0].currentSong.artist+"",l,f,g,y,_,v;const L=[rs,ns],x=[];function w(m,I){return m[0].isPlaying?0:1}return y=w(e),_=x[y]=L[y](e),{c(){t=b("div"),n=b("div"),r=b("div"),s=ie(o),i=A(),a=b("div"),l=ie(c),f=A(),g=b("div"),_.c(),d(r,"class","song-title text-sm font-medium truncate max-w-[120px] svelte-6qw3wr"),d(a,"class","song-artist text-xs opacity-80 truncate max-w-[120px] svelte-6qw3wr"),d(n,"class","song-info-compact"),d(g,"class","play-status-indicator mt-1 svelte-6qw3wr"),d(t,"class","auto-collapsed-info bg-black/30 backdrop-blur-sm text-white p-3 shadow-lg border-l-2 border-[var(--primary)] "+(M.layout==="left"?"rounded-r-lg border-l-0 border-r-2":"rounded-l-lg")+" svelte-6qw3wr")},m(m,I){N(m,t,I),p(t,n),p(n,r),p(r,s),p(n,i),p(n,a),p(a,l),p(t,f),p(t,g),x[y].m(g,null),v=!0},p(m,I){(!v||I[0]&1)&&o!==(o=m[0].currentSong.name+"")&&ye(s,o),(!v||I[0]&1)&&c!==(c=m[0].currentSong.artist+"")&&ye(l,c);let C=y;y=w(m),y!==C&&(we(),E(x[C],1,1,()=>{x[C]=null}),_e(),_=x[y],_||(_=x[y]=L[y](m),_.c()),k(_,1),_.m(g,null))},i(m){v||(k(_),v=!0)},o(m){E(_),v=!1},d(m){m&&q(t),x[y].d()}}}function ns(e){let t,n;return t=new $({props:{icon:"material-symbols:pause",class:"text-white/60 text-sm"}}),{c(){B(t.$$.fragment)},m(r,o){W(t,r,o),n=!0},i(r){n||(k(t.$$.fragment,r),n=!0)},o(r){E(t.$$.fragment,r),n=!1},d(r){R(t,r)}}}function rs(e){let t,n;return t=new $({props:{icon:"material-symbols:play-arrow",class:"text-[var(--primary)] text-sm"}}),{c(){B(t.$$.fragment)},m(r,o){W(t,r,o),n=!0},i(r){n||(k(t.$$.fragment,r),n=!0)},o(r){E(t.$$.fragment,r),n=!1},d(r){R(t,r)}}}function is(e){let t,n,r=e[0].isVisible&&Cr(e);return{c(){r&&r.c(),t=dn()},m(o,s){r&&r.m(o,s),N(o,t,s),n=!0},p(o,s){o[0].isVisible?r?(r.p(o,s),s[0]&1&&k(r,1)):(r=Cr(o),r.c(),k(r,1),r.m(t.parentNode,t)):r&&(we(),E(r,1,1,()=>{r=null}),_e())},i(o){n||(k(r),n=!0)},o(o){E(r),n=!1},d(o){o&&q(t),r&&r.d(o)}}}const os=3e3,ss=2e3,Zt=50,Fr=5;function qr(e){if(!e||Number.isNaN(e))return"0:00";const t=Math.floor(e/60),n=Math.floor(e%60);return`${t}:${n.toString().padStart(2,"0")}`}function zr(e){const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t}function ls(){if(typeof window>"u")return{isMobile:!1,isAndroid:!1,isIOS:!1};const e=navigator.userAgent||navigator.vendor||window.opera||"",t=/android/i.test(e),n=/iphone|ipad|ipod/i.test(e),r=/webos|blackberry|iemobile|opera mini/i.test(e),o="ontouchstart"in window||navigator.maxTouchPoints>0,s=window.innerWidth<=768,i=t&&/version\/\d+\.\d+/i.test(e),a=t&&/chrome/i.test(e),c=t&&/wv\)/i.test(e),l=t||i||a||c,f=n;return{isMobile:l||f||r||o&&s,isAndroid:l,isIOS:f}}function as(e,t,n){let r,o,s,i={isVisible:!1,isPlaying:!1,isExpanded:!1,isLoading:!1,currentSong:null,currentTime:0,duration:0,volume:M.defaultVolume,isShuffle:M.enableShuffle,isRepeat:M.enableRepeat,currentPage:1,totalPages:1,playlist:[],currentIndex:0,fullPlaylist:[],shuffledPlaylist:[],shuffleIndex:0},a=!1,c={x:0,y:0},l={x:20,y:20},f=!1,g=!1,y=!1,_=!1,v=0,L=0,x,w=!1,m,I,C,G=!1,S=!1,H=!1,Y,J=M.pageSize,Q=J;function le(){i.fullPlaylist.length!==0&&(n(0,i.shuffledPlaylist=zr(i.fullPlaylist),i),n(0,i.shuffleIndex=0,i))}function de(){if(i.fullPlaylist.length===0)return;n(0,i.fullPlaylist=zr(i.fullPlaylist),i);const u=Math.min(M.pageSize,i.fullPlaylist.length);n(0,i.playlist=i.fullPlaylist.slice(0,u),i),i.isShuffle&&le(),i.playlist.length>0&&(n(0,i.currentSong=i.playlist[0],i),n(0,i.currentIndex=0,i),m&&(m.src=i.currentSong.url))}function qe(){if(n(0,i.isShuffle=!i.isShuffle,i),i.isShuffle&&(le(),i.currentSong)){const u=i.shuffledPlaylist.findIndex(P=>{var D;return P.id===((D=i.currentSong)==null?void 0:D.id)});u!==-1&&n(0,i.shuffleIndex=u,i)}console.log(`随机播放模式: ${i.isShuffle?"开启":"关闭"}`)}function Ue(){i.fullPlaylist.length!==0&&(console.log("手动重新随机排序歌曲..."),de(),m&&!m.paused&&(m.pause(),n(0,i.isPlaying=!1,i)),m&&i.currentSong&&(m.src=i.currentSong.url))}async function it(){var u;try{n(0,i.isLoading=!0,i);const P=await Lr.getAllSongs(M.defaultPlaylistId);n(0,i.fullPlaylist=P.songs,i),n(0,i.totalPages=P.totalPages,i),de(),i.isShuffle&&le(),i.playlist.length>0&&(i.isShuffle&&i.shuffledPlaylist.length>0?(n(0,i.currentSong=i.shuffledPlaylist[0],i),n(0,i.shuffleIndex=0,i)):(n(0,i.currentSong=i.playlist[0],i),n(0,i.currentIndex=0,i)),m&&((u=i.currentSong)!=null&&u.url)&&(m.src=i.currentSong.url,M.enableAutoPlay&&setTimeout(()=>{Ne()},300))),n(0,i.isLoading=!1,i)}catch(P){console.error("加载所有歌曲失败:",P),n(0,i.isLoading=!1,i)}}async function X(u=1,P=J){try{n(0,i.isLoading=!0,i);const D=await Lr.getPlaylist(M.defaultPlaylistId,u,P);n(0,i.playlist=D.songs,i),n(0,i.currentPage=D.pagination.page,i),n(0,i.totalPages=D.pagination.total_pages,i),n(0,i.isLoading=!1,i)}catch(D){console.error("加载歌单失败:",D),n(0,i.isLoading=!1,i)}}async function ve(){i.currentSong&&(i.isPlaying?(m.pause(),n(0,i.isPlaying=!1,i)):await Ee("用户点击"),f&&!i.isExpanded&&st())}function re(){if(i.isShuffle&&i.shuffledPlaylist.length>0){let u=i.shuffleIndex-1;u<0&&(u=i.shuffledPlaylist.length-1),n(0,i.shuffleIndex=u,i),n(0,i.currentSong=i.shuffledPlaylist[u],i);const P=i.playlist.findIndex(D=>{var V;return D.id===((V=i.currentSong)==null?void 0:V.id)});P!==-1&&n(0,i.currentIndex=P,i)}else{if(i.playlist.length===0)return;let u=i.currentIndex-1;if(u<0){if(i.currentPage>1){F(i.currentPage-1,!0);return}u=i.playlist.length-1}xe(u)}setTimeout(async()=>{await Ee("上一首")},100)}function pe(){if(i.isShuffle&&i.shuffledPlaylist.length>0){let u=i.shuffleIndex+1;u>=i.shuffledPlaylist.length&&(u=0),n(0,i.shuffleIndex=u,i),n(0,i.currentSong=i.shuffledPlaylist[u],i);const P=i.playlist.findIndex(D=>{var V;return D.id===((V=i.currentSong)==null?void 0:V.id)});P!==-1&&n(0,i.currentIndex=P,i)}else{if(i.playlist.length===0)return;let u=i.currentIndex+1;if(u>=i.playlist.length){if(i.currentPage<i.totalPages){F(i.currentPage+1,!1);return}u=0}xe(u)}setTimeout(async()=>{await Ee("下一首")},100)}function xe(u){if(u<0||u>=i.playlist.length)return;const P=i.isPlaying;n(0,i.currentSong=i.playlist[u],i),n(0,i.currentIndex=u,i),m&&(m.paused||m.pause(),m.src=i.currentSong.url,P&&setTimeout(async()=>{await Ee("选择歌曲")},50))}async function F(u,P=!1){if(u<1||u>i.totalPages)return;const D=i.isPlaying;if(await X(u,J),i.playlist.length>0){const V=P?i.playlist.length-1:0;n(0,i.currentSong=i.playlist[V],i),n(0,i.currentIndex=V,i),m&&(m.paused||m.pause(),m.src=i.currentSong.url,D&&setTimeout(async()=>{await Ee("切换页面")},50))}}function ae(){const u=Math.max(20,Math.min(100,Q));u!==Q&&n(10,Q=u),J=u}function ce(u){G=!0,ee(u)}function Ie(u){G&&ee(u)}function T(){G=!1}function ee(u){if(!I||!m||i.duration===0)return;const P=I.getBoundingClientRect(),V=Math.max(0,Math.min(1,(u.clientX-P.left)/P.width))*i.duration;m.currentTime=V,n(0,i.currentTime=V,i)}function ue(u){S=!0,Se(u)}function ke(u){S&&Se(u)}function Lt(){S=!1}function Se(u){if(!C||!m)return;const P=C.getBoundingClientRect(),D=Math.max(0,Math.min(1,(u.clientX-P.left)/P.width));n(0,i.volume=D,i),m.volume=D}function ge(){m&&(m.addEventListener("loadstart",()=>{n(0,i.isLoading=!0,i)}),m.addEventListener("loadedmetadata",()=>{n(0,i.duration=m.duration,i),n(0,i.isLoading=!1,i)}),m.addEventListener("timeupdate",()=>{G||n(0,i.currentTime=m.currentTime,i)}),m.addEventListener("play",()=>{n(0,i.isPlaying=!0,i)}),m.addEventListener("pause",()=>{n(0,i.isPlaying=!1,i)}),m.addEventListener("ended",async()=>{i.isRepeat?await Ee("重复播放"):pe()}),m.addEventListener("error",u=>{console.error("音频播放错误:",u),n(0,i.isPlaying=!1,i),n(0,i.isLoading=!1,i)}))}function me(u){if(!(!M.enableKeyboardShortcuts||!i.isVisible)&&!(typeof document>"u"))switch(u.code){case"Space":u.target===document.body&&(u.preventDefault(),ve());break;case"ArrowLeft":u.target===document.body&&(u.preventDefault(),re());break;case"ArrowRight":u.target===document.body&&(u.preventDefault(),pe());break}}let ze={x:0,y:0},Ge=!1;function We(u){if(typeof window>"u")return;ze.x=u.clientX,ze.y=u.clientY,Ge=!1;const P=u.currentTarget.getBoundingClientRect();c.x=u.clientX-P.left,c.y=u.clientY-P.top,document.addEventListener("mousemove",Re),document.addEventListener("mouseup",ot),u.preventDefault()}function Re(u){if(typeof window>"u")return;if(!Ge){const O=Math.abs(u.clientX-ze.x),ne=Math.abs(u.clientY-ze.y);if(O>Fr||ne>Fr)Ge=!0,n(1,a=!0);else return}if(!a)return;const P=i.isExpanded?M.expandedWidth:M.miniWidth,D=i.isExpanded?M.expandedHeight:80;if(M.layout==="left"){const O=u.clientX-c.x;n(2,l.x=Math.max(10,Math.min(window.innerWidth-P-10,O)),l)}else{const O=window.innerWidth-u.clientX+c.x-P;n(2,l.x=Math.max(10,Math.min(window.innerWidth-P-10,O)),l)}const V=window.innerHeight-u.clientY+c.y-D;n(2,l.y=Math.max(10,Math.min(window.innerHeight-D-10,V)),l)}function ot(){const u=a&&Ge;n(1,a=!1),Ge=!1,!(typeof document>"u")&&(document.removeEventListener("mousemove",Re),document.removeEventListener("mouseup",ot),u&&setTimeout(()=>{Be("拖拽结束")},100))}async function Ee(u="用户操作"){if(H||!m||!i.currentSong)return console.log(`播放操作被跳过 (${u})：操作进行中或无有效歌曲`),!1;H=!0;try{return m.paused||m.pause(),m.src!==i.currentSong.url&&(m.src=i.currentSong.url),await m.play(),n(0,i.isPlaying=!0,i),!0}catch(P){return console.error("播放失败:",P instanceof Error?P.message:String(P)),n(0,i.isPlaying=!1,i),!1}finally{H=!1}}async function Ne(){!M.enableAutoPlay||!i.currentSong||setTimeout(async()=>{await Ee("自动播放")},100)}function Me(){if(typeof window>"u")return;v=window.innerWidth,L=window.innerHeight;const u=ls();n(3,f=u.isMobile),n(4,g=u.isAndroid),n(5,y=u.isIOS);const P=i.isExpanded?M.expandedWidth:M.miniWidth,D=i.isExpanded?M.expandedHeight:80;n(2,l.x=Math.max(10,Math.min(v-P-10,l.x)),l),n(2,l.y=Math.max(10,Math.min(L-D-10,l.y)),l),f&&!a&&l.x===20&&l.y===20&&(g?(n(2,l.x=15,l),n(2,l.y=100,l)):y?(n(2,l.x=15,l),n(2,l.y=90,l)):(n(2,l.x=15,l),n(2,l.y=80,l))),setTimeout(()=>{Be("窗口大小变化")},100)}function st(){f&&(he(),x=setTimeout(()=>{f&&!i.isExpanded&&!a&&Xe()},os))}function he(){x&&(clearTimeout(x),x=void 0)}function Xe(){f&&(n(7,w=!0),n(6,_=!0),n(0,i.isExpanded=!1,i),n(2,l.x=-200,l),n(2,l.y=Math.min(l.y,L-120),l),console.log("移动端自动收缩到把手模式"))}function Yt(){typeof window>"u"||(n(6,_=!0),n(0,i.isExpanded=!1,i),n(7,w=!1),n(2,l.x=-280,l),n(2,l.y=Math.min(l.y,L-100),l))}function se(){n(6,_=!1),n(7,w=!1),n(2,l.x=20,l),f&&st()}function Ze(){_&&se(),w&&(n(7,w=!1),l.x<-100&&n(2,l.x=20,l));const u=i.isExpanded,P=!i.isExpanded;if(P&&!u){const D=M.expandedHeight,V=M.expandedWidth,O=20;if(typeof window<"u"){let ne=l.y+D;const Ce=window.innerHeight-O;if(ne>Ce){const sn=ne-Ce;n(2,l.y-=sn,l),l.y<O&&n(2,l.y=O,l)}l.y<O&&n(2,l.y=O,l);const Je=window.innerWidth-V-O;l.x>Je&&n(2,l.x=Je,l),l.x<O&&n(2,l.x=O,l)}}n(0,i.isExpanded=P,i),i.isExpanded&&!u?(Qt(),he()):!i.isExpanded&&f&&st()}function Qt(){if(typeof window>"u")return;const u=-200,P=window.innerWidth-50,D=10,V=window.innerHeight-100;let O=!1;l.x<u?(n(2,l.x=u,l),O=!0):l.x>P&&(n(2,l.x=P,l),O=!0),l.y<D?(n(2,l.y=D,l),O=!0):l.y>V&&(n(2,l.y=V,l),O=!0),O&&console.log("调整播放器位置到可见区域:",l)}function Be(u="边界检查"){if(typeof window>"u"||a)return;const P=i.isExpanded?M.expandedWidth:M.miniWidth,D=i.isExpanded?M.expandedHeight:80;let V=!1,O=l.x,ne=l.y;window.innerWidth-O<P-Zt&&(O=window.innerWidth-P-20,V=!0),O>window.innerWidth-Zt&&(O=window.innerWidth-P-20,V=!0),window.innerHeight-ne<D-Zt&&(ne=window.innerHeight-D-20,V=!0),ne>window.innerHeight-Zt&&(ne=window.innerHeight-D-20,V=!0),V&&(console.log(`播放器超出安全边界，执行回弹 (${u}):`,{原位置:{x:l.x,y:l.y},新位置:{x:O,y:ne},屏幕尺寸:{width:window.innerWidth,height:window.innerHeight}}),n(2,l.x=O,l),n(2,l.y=ne,l))}function mt(){Y||(Y=setInterval(()=>{!a&&i.isVisible&&Be("定时检查")},ss))}function Kt(){Y&&(clearInterval(Y),Y=void 0)}function Ye(){const u=[{id:1,name:"加载中...",artist:"正在获取歌单",url:"",pic_url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDMwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjNGY0NmU1Ii8+Cjx0ZXh0IHg9IjE1MCIgeT0iMTUwIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iMC4zZW0iPkxvYWRpbmcuLi48L3RleHQ+Cjwvc3ZnPg=="}];n(0,i.playlist=u,i),n(0,i.fullPlaylist=u,i),n(0,i.currentSong=u[0],i),n(0,i.currentIndex=0,i),n(0,i.isVisible=!0,i),it().then(()=>{}).catch(P=>{console.error("歌单加载失败:",P)})}Gn(async()=>{typeof window>"u"||typeof document>"u"||(Me(),window.addEventListener("resize",Me),g&&(console.log("检测到安卓设备，应用特殊优化"),setTimeout(()=>{n(0,i.isVisible=!0,i)},100),document.addEventListener("touchstart",()=>{},{passive:!0}),document.addEventListener("touchmove",()=>{},{passive:!0})),m=new Audio,m.volume=i.volume,ge(),Ye(),f?M.startMinimizedMobile?n(6,_=!0):st():he(),mt(),document.addEventListener("keydown",me),document.addEventListener("mousemove",Ie),document.addEventListener("mouseup",T),document.addEventListener("mousemove",ke),document.addEventListener("mouseup",Lt))}),Xn(()=>{typeof window>"u"||typeof document>"u"||(m&&(m.pause(),m.src="",m.load(),n(0,i.isPlaying=!1,i)),H=!1,he(),Kt(),window.removeEventListener("resize",Me),document.removeEventListener("keydown",me),document.removeEventListener("mousemove",Ie),document.removeEventListener("mouseup",T),document.removeEventListener("mousemove",ke),document.removeEventListener("mouseup",Lt))});const Jt=u=>{u.stopPropagation(),re()},Le=u=>{u.stopPropagation(),ve()},Qe=u=>{u.stopPropagation(),pe()},ht=u=>{u.stopPropagation(),Ze()},en=()=>n(0,i.isExpanded=!1,i);function Ke(u){qt[u?"unshift":"push"](()=>{I=u,n(8,I)})}const Ae=()=>n(0,i.isRepeat=!i.isRepeat,i);function tn(u){qt[u?"unshift":"push"](()=>{C=u,n(9,C)})}const bt=()=>F(i.currentPage-1);function At(){Q=Bn(this.value),n(10,Q)}const nn=u=>u.key==="Enter"&&ae(),yt=()=>{ae(),F(1)},Ct=()=>F(i.currentPage+1),rn=u=>xe(u),on=u=>u.key==="Enter"&&se();return e.$$.update=()=>{e.$$.dirty[0]&1&&n(13,r=qr(i.currentTime)),e.$$.dirty[0]&1&&n(12,o=qr(i.duration)),e.$$.dirty[0]&1&&n(11,s=i.duration>0?i.currentTime/i.duration*100:0)},[i,a,l,f,g,y,_,w,I,C,Q,s,o,r,qe,Ue,ve,re,pe,xe,F,ae,ce,ue,We,Yt,se,Ze,Jt,Le,Qe,ht,en,Ke,Ae,tn,bt,At,nn,yt,Ct,rn,on]}class cs extends er{constructor(t){super(),Jn(this,t,as,is,Hn,{},null,[-1,-1,-1])}}const Wr="hexo-music-player-root";let Mt=document.getElementById(Wr);return Mt||(Mt=document.createElement("div"),Mt.id=Wr,document.body.appendChild(Mt)),new cs({target:Mt})}();
